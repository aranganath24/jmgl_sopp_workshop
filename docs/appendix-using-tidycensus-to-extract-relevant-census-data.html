<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Appendix: Using tidycensus to extract relevant census data | Exploring the Geography of Systemic Racism with Spatial Data Science</title>
  <meta name="description" content="Appendix: Using tidycensus to extract relevant census data | Exploring the Geography of Systemic Racism with Spatial Data Science" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Appendix: Using tidycensus to extract relevant census data | Exploring the Geography of Systemic Racism with Spatial Data Science" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Appendix: Using tidycensus to extract relevant census data | Exploring the Geography of Systemic Racism with Spatial Data Science" />
  
  
  

<meta name="author" content="Aditya Ranganath" />


<meta name="date" content="2022-06-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="loading-data.html"/>

<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to GIS</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#workshop-objectives"><i class="fa fa-check"></i><b>1.1</b> Workshop Objectives</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i><b>1.2</b> Data</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#r-and-r-studio-installation"><i class="fa fa-check"></i><b>1.3</b> R and R Studio Installation</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#the-r-studio-interface"><i class="fa fa-check"></i><b>1.4</b> The R Studio Interface</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#installing-and-loading-packages"><i class="fa fa-check"></i><b>1.5</b> Installing and loading packages</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#setting-your-working-directory"><i class="fa fa-check"></i><b>1.6</b> Setting your working directory</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="loading-data.html"><a href="loading-data.html"><i class="fa fa-check"></i><b>2</b> Loading data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="loading-data.html"><a href="loading-data.html#create-a-year-field"><i class="fa fa-check"></i><b>2.1</b> Create a “Year” field</a></li>
<li class="chapter" data-level="2.2" data-path="loading-data.html"><a href="loading-data.html#filter-by-year"><i class="fa fa-check"></i><b>2.2</b> Filter by year</a></li>
<li class="chapter" data-level="2.3" data-path="loading-data.html"><a href="loading-data.html#tabulate-county-level-count-of-traffic-stops-by-race"><i class="fa fa-check"></i><b>2.3</b> Tabulate county-level count of traffic stops by race</a></li>
<li class="chapter" data-level="2.4" data-path="loading-data.html"><a href="loading-data.html#reshape-the-data"><i class="fa fa-check"></i><b>2.4</b> Reshape the data</a></li>
<li class="chapter" data-level="2.5" data-path="loading-data.html"><a href="loading-data.html#calculate-total-stops-for-each-county-in-co_county_summary_wide"><i class="fa fa-check"></i><b>2.5</b> Calculate total stops for each county in <code>co_county_summary_wide</code></a></li>
<li class="chapter" data-level="2.6" data-path="loading-data.html"><a href="loading-data.html#clean-co_county_summary_wide-and-assign-to-new-object"><i class="fa fa-check"></i><b>2.6</b> Clean <code>co_county_summary_wide</code> and assign to new object</a></li>
<li class="chapter" data-level="2.7" data-path="loading-data.html"><a href="loading-data.html#read-in-and-join-2010-census-data-to-co_county_black_stops"><i class="fa fa-check"></i><b>2.7</b> Read in and join 2010 census data to <code>co_county_black_stops</code></a></li>
<li class="chapter" data-level="2.8" data-path="loading-data.html"><a href="loading-data.html#join-census-data-to-co_county_black_stops"><i class="fa fa-check"></i><b>2.8</b> Join census data to <code>co_county_black_stops</code></a></li>
<li class="chapter" data-level="2.9" data-path="loading-data.html"><a href="loading-data.html#define-the-variables-that-will-be-used-in-the-bias-index"><i class="fa fa-check"></i><b>2.9</b> Define the variables that will be used in the bias index</a></li>
<li class="chapter" data-level="2.10" data-path="loading-data.html"><a href="loading-data.html#calculate-the-bias-index"><i class="fa fa-check"></i><b>2.10</b> Calculate the bias index</a></li>
<li class="chapter" data-level="2.11" data-path="loading-data.html"><a href="loading-data.html#compute-summary-statistics-for-the-bias-index"><i class="fa fa-check"></i><b>2.11</b> Compute summary statistics for the bias index</a></li>
<li class="chapter" data-level="2.12" data-path="loading-data.html"><a href="loading-data.html#visualize-county-level-variation-in-the-bias-index-using-ggplot"><i class="fa fa-check"></i><b>2.12</b> Visualize county-level variation in the bias index using <code>ggplot</code></a></li>
<li class="chapter" data-level="2.13" data-path="loading-data.html"><a href="loading-data.html#read-in-and-view-the-shapefile-of-co-counties"><i class="fa fa-check"></i><b>2.13</b> Read in and view the shapefile of CO counties</a></li>
<li class="chapter" data-level="2.14" data-path="loading-data.html"><a href="loading-data.html#join-co_counties_census_trafficstops-to-the-shapefile-of-colorado-counties"><i class="fa fa-check"></i><b>2.14</b> Join <code>co_counties_census_trafficstops</code> to the shapefile of Colorado counties</a></li>
<li class="chapter" data-level="2.15" data-path="loading-data.html"><a href="loading-data.html#display-the-bias-index-on-a-map-of-colorado-counties"><i class="fa fa-check"></i><b>2.15</b> Display the bias index on a map of Colorado counties</a>
<ul>
<li class="chapter" data-level="2.15.1" data-path="loading-data.html"><a href="loading-data.html#make-a-rough-draft-of-a-map"><i class="fa fa-check"></i><b>2.15.1</b> Make a rough draft of a map</a></li>
<li class="chapter" data-level="2.15.2" data-path="loading-data.html"><a href="loading-data.html#make-a-map-with-custom-breaks"><i class="fa fa-check"></i><b>2.15.2</b> Make a map with custom breaks</a></li>
<li class="chapter" data-level="2.15.3" data-path="loading-data.html"><a href="loading-data.html#make-a-map-with-custom-colors"><i class="fa fa-check"></i><b>2.15.3</b> Make a map with custom colors</a></li>
</ul></li>
<li class="chapter" data-level="2.16" data-path="loading-data.html"><a href="loading-data.html#make-a-categorical-map"><i class="fa fa-check"></i><b>2.16</b> Make a categorical map</a></li>
<li class="chapter" data-level="2.17" data-path="loading-data.html"><a href="loading-data.html#refining-the-map-of-the-continuous-bias_index-variable"><i class="fa fa-check"></i><b>2.17</b> Refining the map of the continuous “bias_index” variable</a></li>
<li class="chapter" data-level="2.18" data-path="loading-data.html"><a href="loading-data.html#refining-the-categorical-map"><i class="fa fa-check"></i><b>2.18</b> Refining the categorical map</a></li>
<li class="chapter" data-level="2.19" data-path="loading-data.html"><a href="loading-data.html#making-a-dynamic-map-of-the-bias-index"><i class="fa fa-check"></i><b>2.19</b> Making a dynamic map of the bias index</a></li>
<li class="chapter" data-level="2.20" data-path="loading-data.html"><a href="loading-data.html#summary-script-to-prepare-clean-and-process-data-for-mapping"><i class="fa fa-check"></i><b>2.20</b> Summary script to prepare, clean, and process data for mapping</a></li>
<li class="chapter" data-level="2.21" data-path="loading-data.html"><a href="loading-data.html#summary-script-for-map-of-continuous-bias_index-variable"><i class="fa fa-check"></i><b>2.21</b> Summary script for map of continuous “bias_index” variable</a></li>
<li class="chapter" data-level="2.22" data-path="loading-data.html"><a href="loading-data.html#summary-script-for-categorical-map"><i class="fa fa-check"></i><b>2.22</b> Summary script for categorical map</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix-using-tidycensus-to-extract-relevant-census-data.html"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html"><i class="fa fa-check"></i>Appendix: Using tidycensus to extract relevant census data</a>
<ul>
<li class="chapter" data-level="2.23" data-path="appendix-using-tidycensus-to-extract-relevant-census-data.html"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#step-1-define-your-variables"><i class="fa fa-check"></i><b>2.23</b> Step 1: Define your variables</a></li>
<li class="chapter" data-level="2.24" data-path="appendix-using-tidycensus-to-extract-relevant-census-data.html"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#step-2-extract-the-variables-using-tidycensus"><i class="fa fa-check"></i><b>2.24</b> Step 2: Extract the variables using tidycensus</a></li>
<li class="chapter" data-level="2.25" data-path="appendix-using-tidycensus-to-extract-relevant-census-data.html"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#step-3-clean-the-tidycensus-dataset"><i class="fa fa-check"></i><b>2.25</b> Step 3: Clean the tidycensus dataset</a></li>
<li class="chapter" data-level="2.26" data-path="appendix-using-tidycensus-to-extract-relevant-census-data.html"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#step-4-define-new-variables"><i class="fa fa-check"></i><b>2.26</b> Step 4: Define new variables</a></li>
<li class="chapter" data-level="2.27" data-path="appendix-using-tidycensus-to-extract-relevant-census-data.html"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#step-5-finalize-and-export-the-dataset"><i class="fa fa-check"></i><b>2.27</b> Step 5: Finalize and export the dataset</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Exploring the Geography of Systemic Racism with Spatial Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="appendix-using-tidycensus-to-extract-relevant-census-data" class="section level1 unnumbered">
<h1>Appendix: Using tidycensus to extract relevant census data</h1>
<p>This section provides a script used to extract the census dataset that was read into R Studio in Section 5.1. To save time during a workshop, it is recommended to prepare the census dataset required to create the relevant index beforehand, and simply provide students with the relevant dataset. However, if you are looking for a way to extract the census dataset within R, the following script can be used as a guide.</p>
<p>To extract the census data required to create the bias index, load the <code>tidyverse</code> (which was used in the workshop tutorial) and the <code>tidycensus</code> package, which is an R package that allows users to pull Census Bureau data using the Census API (if tidycensus is not already installed, please install it using <code>install.packages("tidycensus")</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Loads libraries required to extract census data</span></span>
<span id="cb1-2"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span>
<span id="cb1-3"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──</code></pre>
<pre><code>## ✓ ggplot2 3.3.3     ✓ purrr   0.3.4
## ✓ tibble  3.1.6     ✓ dplyr   1.0.7
## ✓ tidyr   1.2.0     ✓ stringr 1.4.0
## ✓ readr   1.4.0     ✓ forcats 0.5.1</code></pre>
<pre><code>## Warning: package &#39;tidyr&#39; was built under R version 4.0.5</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<p>Before extracting data with <code>tidycensus</code>, you must acquire a Census API key from the Census Bureau website; once you apply for a key on the website, your key will be immediately emailed to the address you provide. Enter your census API key in R Studio with the following code, replacing the <INSERT HERE> with your key:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">census_api_key</span>(<span class="st">&quot;INSERT HERE&quot;</span>)</span></code></pre></div>
<p>In the workshop, we were working with 2010 police stops data, so it made sense to pull demographic data from the 2010 decennial census (which would have been collected in 2009).
The discussion below is therefore framed with respect to the 2010 decennial census; if you choose to use another census dataset to create the index, your code may look slightly different.</p>
<div id="step-1-define-your-variables" class="section level2" number="2.23">
<h2><span class="header-section-number">2.23</span> Step 1: Define your variables</h2>
<p>First, we can generate a table that contains the various variables (and associated variable codes) for the 2010 decennial census by using the <code>load_variables</code> function. The arguments to the function below <code>(2010, "sf1")</code> indicate that we want to extract variable names and codes for the 2010 decennial census. We assign the table to an object named <code>decennial_2010_variables</code>, which allows us to easily view the table by using the <code>View</code> function, and refer back to it whenever needed.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable list for 2010 Decennial</span></span>
<span id="cb7-2"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb7-2" aria-hidden="true" tabindex="-1"></a>decennial_2010_variables<span class="ot">&lt;-</span><span class="fu">load_variables</span>(<span class="dv">2010</span>, <span class="st">&quot;sf1&quot;</span>)</span></code></pre></div>
<p>Based on the information in <code>decennial_2010_variables</code>, we can identify the variable codes for the variables we want to extract. Then, we define a vector, assigned to an object named <code>my_vars</code> that assigns the variable codes to descriptive names; these descriptive names will be used as column names in the dataset returned by the census API call, while the variable codes will be used by <code>tidycensus</code> to populate the respective fields with the desired data.</p>
<p>For the purpose of defining the “bias_index” variable, recall that the two key variables we need are the over-17 total population, and the over-17 Black population (counted at the county level). There is no separate category in the census dataset for these measures, so we must derive them based on the data that is available.</p>
<p>Given the available data, to calculate the total over-17 population, we must extract data for the male under-5 population, the male 5 to 9 population, the male 10 to 14 population, and the male 15 to 17 population, and analogous measures for the female population. Subtracting these values from the total overall population (among all age groups) will yield a value for the total over-17 population.</p>
<p>To calculate the Black over-17 population, we will extract a variable that defines the total Black population, and a series of variables that measure the Black population for different demographic (sex/age) combinations under 17 years old; subtracting the sum of the latter variables from the total Black population yields a measure of the Black over-17 population.</p>
<p>The code below extracts all the variables needed to carry out these calculation:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define and name variables for census API call</span></span>
<span id="cb8-2"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-3" aria-hidden="true" tabindex="-1"></a>my_vars<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="at">total_pop=</span><span class="st">&quot;P001001&quot;</span>,</span>
<span id="cb8-4"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">totalpop_men_u5=</span><span class="st">&quot;P012003&quot;</span>,</span>
<span id="cb8-5"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">totalpop_men_5to9=</span><span class="st">&quot;P012004&quot;</span>,</span>
<span id="cb8-6"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">totalpop_men_10to14=</span><span class="st">&quot;P012005&quot;</span>,</span>
<span id="cb8-7"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">totalpop_men_15to17=</span><span class="st">&quot;P012006&quot;</span>,</span>
<span id="cb8-8"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">totalpop_women_u5=</span><span class="st">&quot;P012027&quot;</span>,</span>
<span id="cb8-9"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">totalpop_women_5to9=</span><span class="st">&quot;P012028&quot;</span>,</span>
<span id="cb8-10"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">totalpop_women_10to14=</span><span class="st">&quot;P012029&quot;</span>,</span>
<span id="cb8-11"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">totalpop_women_15to17=</span><span class="st">&quot;P012030&quot;</span>,</span>
<span id="cb8-12"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_totalpop=</span><span class="st">&quot;PCT012B001&quot;</span>,</span>
<span id="cb8-13"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_u1=</span><span class="st">&quot;PCT012B003&quot;</span>,</span>
<span id="cb8-14"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-14" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_1=</span><span class="st">&quot;PCT012B004&quot;</span>,</span>
<span id="cb8-15"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-15" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_2=</span><span class="st">&quot;PCT012B005&quot;</span>,</span>
<span id="cb8-16"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_3=</span><span class="st">&quot;PCT012B006&quot;</span>,</span>
<span id="cb8-17"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_4=</span><span class="st">&quot;PCT012B007&quot;</span>,</span>
<span id="cb8-18"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-18" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_5=</span><span class="st">&quot;PCT012B008&quot;</span>,</span>
<span id="cb8-19"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-19" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_6=</span><span class="st">&quot;PCT012B009&quot;</span>,</span>
<span id="cb8-20"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-20" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_7=</span><span class="st">&quot;PCT012B010&quot;</span>,</span>
<span id="cb8-21"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-21" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_8=</span><span class="st">&quot;PCT012B011&quot;</span>,</span>
<span id="cb8-22"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-22" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_9=</span><span class="st">&quot;PCT012B012&quot;</span>,</span>
<span id="cb8-23"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-23" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_10=</span><span class="st">&quot;PCT012B013&quot;</span>,</span>
<span id="cb8-24"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-24" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_11=</span><span class="st">&quot;PCT012B014&quot;</span>,</span>
<span id="cb8-25"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-25" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_12=</span><span class="st">&quot;PCT012B015&quot;</span>,</span>
<span id="cb8-26"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-26" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_13=</span><span class="st">&quot;PCT012B016&quot;</span>,</span>
<span id="cb8-27"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-27" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_14=</span><span class="st">&quot;PCT012B017&quot;</span>,</span>
<span id="cb8-28"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-28" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_15=</span><span class="st">&quot;PCT012B018&quot;</span>,</span>
<span id="cb8-29"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-29" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_16=</span><span class="st">&quot;PCT012B019&quot;</span>,</span>
<span id="cb8-30"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-30" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_17=</span><span class="st">&quot;PCT012B020&quot;</span>,</span>
<span id="cb8-31"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-31" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_u1=</span><span class="st">&quot;PCT012B107&quot;</span>,</span>
<span id="cb8-32"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-32" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_1=</span><span class="st">&quot;PCT012B108&quot;</span>,</span>
<span id="cb8-33"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-33" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_2=</span><span class="st">&quot;PCT012B109&quot;</span>,</span>
<span id="cb8-34"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-34" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_3=</span><span class="st">&quot;PCT012B110&quot;</span>,</span>
<span id="cb8-35"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-35" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_4=</span><span class="st">&quot;PCT012B111&quot;</span>,</span>
<span id="cb8-36"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-36" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_5=</span><span class="st">&quot;PCT012B112&quot;</span>,</span>
<span id="cb8-37"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-37" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_6=</span><span class="st">&quot;PCT012B113&quot;</span>,</span>
<span id="cb8-38"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-38" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_7=</span><span class="st">&quot;PCT012B114&quot;</span>,</span>
<span id="cb8-39"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-39" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_8=</span><span class="st">&quot;PCT012B115&quot;</span>,</span>
<span id="cb8-40"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-40" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_9=</span><span class="st">&quot;PCT012B116&quot;</span>,</span>
<span id="cb8-41"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-41" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_10=</span><span class="st">&quot;PCT012B117&quot;</span>,</span>
<span id="cb8-42"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-42" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_11=</span><span class="st">&quot;PCT012B118&quot;</span>,</span>
<span id="cb8-43"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-43" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_12=</span><span class="st">&quot;PCT012B119&quot;</span>,</span>
<span id="cb8-44"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-44" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_13=</span><span class="st">&quot;PCT012B120&quot;</span>,</span>
<span id="cb8-45"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-45" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_14=</span><span class="st">&quot;PCT012B121&quot;</span>,</span>
<span id="cb8-46"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-46" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_15=</span><span class="st">&quot;PCT012B122&quot;</span>,</span>
<span id="cb8-47"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-47" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_16=</span><span class="st">&quot;PCT012B123&quot;</span>,</span>
<span id="cb8-48"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb8-48" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_17=</span><span class="st">&quot;PCT012B124&quot;</span>)</span></code></pre></div>
</div>
<div id="step-2-extract-the-variables-using-tidycensus" class="section level2" number="2.24">
<h2><span class="header-section-number">2.24</span> Step 2: Extract the variables using tidycensus</h2>
<p>Now that we have a vector of the variables we want to extract (along with descriptive names for those variables), we will use the <code>get_decennial</code> function from <em>tidycensus</em> to extract these variables from the 2010 decennial census. Several arguments are passed to the <code>get_decennial</code> function below:</p>
<ul>
<li><code>geography="county"</code> specifies that we want the census data to be provided at the county level</li>
<li><code>variables=my_vars</code> specifies the variables we want to extract, and the names they are to be given in the dataset; this information is contained in the <code>my_vars</code> vector defined above</li>
<li><code>state=CO</code> specifies the state for which we want to extract the data; this argument, together with the <code>geography="county"</code> argument, means that <em>tidycensus</em> will extract the specified data in <code>my_vars</code> at the county level for the state of Colorado.</li>
<li><code>survey="sf1"</code> indicates which census dataset we would like to query; here <code>sf1</code> (short for Summary File 1), indicates we are referring to the decennial census (as opposed, for example, to the American Community Survey)</li>
<li><code>output=wide</code> indicates that we want the dataset with the extracted variables to be in “wide” format, wherein each variable is assigned to its own column.</li>
<li><code>year=2010</code> indicates that we are interested in data from 2010. Combined with <code>survey="sf1"</code>, this will extract the 2010 decennial census data.</li>
</ul>
<p>Finally, we’ll assign the extracted dataset to an object named <code>co_counties_race</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Issue call to Census API</span></span>
<span id="cb9-2"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb9-2" aria-hidden="true" tabindex="-1"></a>co_counties_race<span class="ot">&lt;-</span></span>
<span id="cb9-3"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">get_decennial</span>(</span>
<span id="cb9-4"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">geography=</span><span class="st">&quot;county&quot;</span>, </span>
<span id="cb9-5"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables=</span>my_vars,</span>
<span id="cb9-6"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">state=</span><span class="st">&quot;CO&quot;</span>,</span>
<span id="cb9-7"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">survey=</span><span class="st">&quot;sf1&quot;</span>,</span>
<span id="cb9-8"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">output=</span><span class="st">&quot;wide&quot;</span>,</span>
<span id="cb9-9"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">year=</span><span class="dv">2010</span>)          </span></code></pre></div>
<pre><code>## Getting data from the 2010 decennial Census</code></pre>
<pre><code>## Using Census Summary File 1</code></pre>
<p>We can print the first few lines of the dataset to the console to view its structure, and ensure that everything looks in order:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of &quot;co_counties_race&quot;</span></span>
<span id="cb12-2"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb12-2" aria-hidden="true" tabindex="-1"></a>co_counties_race</span></code></pre></div>
<pre><code>## # A tibble: 64 × 48
##    GEOID NAME        total_pop totalpop_men_u5 totalpop_men_5t… totalpop_men_10…
##    &lt;chr&gt; &lt;chr&gt;           &lt;dbl&gt;           &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
##  1 08023 Costilla C…      3524              99              102              107
##  2 08025 Crowley Co…      5823              88              110              136
##  3 08027 Custer Cou…      4255              62               95              113
##  4 08029 Delta Coun…     30952             887              913             1042
##  5 08031 Denver Cou…    600158           22252            18894            15319
##  6 08035 Douglas Co…    285465           11278            13587            12664
##  7 08033 Dolores Co…      2064              58               63               71
##  8 08049 Grand Coun…     14843             416              421              431
##  9 08039 Elbert Cou…     23086             594              790              976
## 10 08041 El Paso Co…    622263           23152            23050            23252
## # … with 54 more rows, and 42 more variables: totalpop_men_15to17 &lt;dbl&gt;,
## #   totalpop_women_u5 &lt;dbl&gt;, totalpop_women_5to9 &lt;dbl&gt;,
## #   totalpop_women_10to14 &lt;dbl&gt;, totalpop_women_15to17 &lt;dbl&gt;,
## #   black_totalpop &lt;dbl&gt;, black_men_u1 &lt;dbl&gt;, black_men_1 &lt;dbl&gt;,
## #   black_men_2 &lt;dbl&gt;, black_men_3 &lt;dbl&gt;, black_men_4 &lt;dbl&gt;, black_men_5 &lt;dbl&gt;,
## #   black_men_6 &lt;dbl&gt;, black_men_7 &lt;dbl&gt;, black_men_8 &lt;dbl&gt;, black_men_9 &lt;dbl&gt;,
## #   black_men_10 &lt;dbl&gt;, black_men_11 &lt;dbl&gt;, black_men_12 &lt;dbl&gt;, …</code></pre>
<p>As always, it is also possible to view the dataset in the R Studio data viewer by running <code>View(co_counties_race)</code>.</p>
</div>
<div id="step-3-clean-the-tidycensus-dataset" class="section level2" number="2.25">
<h2><span class="header-section-number">2.25</span> Step 3: Clean the tidycensus dataset</h2>
<p>Having extracted the dataset, you may want to tidy it up depending on your needs and preferences. For example, the “NAME” field includes the name of the state, which is not really necessary here since there are only observations from Colorado in the dataset. The code below removes the state name from the NAME field, and updates the <code>co_counties_race</code> object with this change:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove state name from name field</span></span>
<span id="cb14-2"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb14-2" aria-hidden="true" tabindex="-1"></a>co_counties_race<span class="ot">&lt;-</span>co_counties_race <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb14-3" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">separate</span>(<span class="at">col=</span>NAME, <span class="fu">c</span>(<span class="st">&quot;County&quot;</span>, <span class="st">&quot;x&quot;</span>), <span class="at">sep=</span><span class="st">&quot;,&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-4"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb14-4" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">select</span>(<span class="sc">-</span>x)     </span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prints contents of &quot;co_counties_race&quot;</span></span>
<span id="cb15-2"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb15-2" aria-hidden="true" tabindex="-1"></a>co_counties_race</span></code></pre></div>
<pre><code>## # A tibble: 64 × 48
##    GEOID County      total_pop totalpop_men_u5 totalpop_men_5t… totalpop_men_10…
##    &lt;chr&gt; &lt;chr&gt;           &lt;dbl&gt;           &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
##  1 08023 Costilla C…      3524              99              102              107
##  2 08025 Crowley Co…      5823              88              110              136
##  3 08027 Custer Cou…      4255              62               95              113
##  4 08029 Delta Coun…     30952             887              913             1042
##  5 08031 Denver Cou…    600158           22252            18894            15319
##  6 08035 Douglas Co…    285465           11278            13587            12664
##  7 08033 Dolores Co…      2064              58               63               71
##  8 08049 Grand Coun…     14843             416              421              431
##  9 08039 Elbert Cou…     23086             594              790              976
## 10 08041 El Paso Co…    622263           23152            23050            23252
## # … with 54 more rows, and 42 more variables: totalpop_men_15to17 &lt;dbl&gt;,
## #   totalpop_women_u5 &lt;dbl&gt;, totalpop_women_5to9 &lt;dbl&gt;,
## #   totalpop_women_10to14 &lt;dbl&gt;, totalpop_women_15to17 &lt;dbl&gt;,
## #   black_totalpop &lt;dbl&gt;, black_men_u1 &lt;dbl&gt;, black_men_1 &lt;dbl&gt;,
## #   black_men_2 &lt;dbl&gt;, black_men_3 &lt;dbl&gt;, black_men_4 &lt;dbl&gt;, black_men_5 &lt;dbl&gt;,
## #   black_men_6 &lt;dbl&gt;, black_men_7 &lt;dbl&gt;, black_men_8 &lt;dbl&gt;, black_men_9 &lt;dbl&gt;,
## #   black_men_10 &lt;dbl&gt;, black_men_11 &lt;dbl&gt;, black_men_12 &lt;dbl&gt;, …</code></pre>
</div>
<div id="step-4-define-new-variables" class="section level2" number="2.26">
<h2><span class="header-section-number">2.26</span> Step 4: Define new variables</h2>
<p>Now that we have a cleaned dataset with all our necessary variables, we can use these variables to generate the demographic variables needed to calculate the bias index. First, the code below defines a new variable, called “total_pop_over17”, that is calculated by subtracting the total population that is 17 and under from the total overall population:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create variable for total over-17 population</span></span>
<span id="cb17-2"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb17-2" aria-hidden="true" tabindex="-1"></a>co_counties_race<span class="ot">&lt;-</span></span>
<span id="cb17-3"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb17-3" aria-hidden="true" tabindex="-1"></a>  co_counties_race <span class="sc">%&gt;%</span> </span>
<span id="cb17-4"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb17-4" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">total_pop_over17=</span></span>
<span id="cb17-5"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb17-5" aria-hidden="true" tabindex="-1"></a>              total_pop<span class="sc">-</span>totalpop_men_u5<span class="sc">-</span>totalpop_men_5to9<span class="sc">-</span></span>
<span id="cb17-6"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb17-6" aria-hidden="true" tabindex="-1"></a>              totalpop_men_10to14<span class="sc">-</span>totalpop_men_15to17<span class="sc">-</span>totalpop_women_u5<span class="sc">-</span></span>
<span id="cb17-7"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb17-7" aria-hidden="true" tabindex="-1"></a>              totalpop_women_5to9<span class="sc">-</span>totalpop_women_10to14<span class="sc">-</span>totalpop_women_15to17)</span></code></pre></div>
<p>Then, we create a new variable named “total_black_pop_over17”, which is defined by subtracting the total Black population that is 17 and under from the total Black population:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create variable for total over--17 black population</span></span>
<span id="cb18-2"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb18-2" aria-hidden="true" tabindex="-1"></a>co_counties_race<span class="ot">&lt;-</span></span>
<span id="cb18-3"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  co_counties_race <span class="sc">%&gt;%</span> </span>
<span id="cb18-4"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_black_pop_over17=</span></span>
<span id="cb18-5"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb18-5" aria-hidden="true" tabindex="-1"></a>          black_totalpop<span class="sc">-</span>black_men_u1<span class="sc">-</span>black_men_1<span class="sc">-</span></span>
<span id="cb18-6"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb18-6" aria-hidden="true" tabindex="-1"></a>          black_men_2<span class="sc">-</span>black_men_3<span class="sc">-</span>black_men_4<span class="sc">-</span>black_men_5<span class="sc">-</span>black_men_6<span class="sc">-</span></span>
<span id="cb18-7"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb18-7" aria-hidden="true" tabindex="-1"></a>          black_men_7<span class="sc">-</span>black_men_8<span class="sc">-</span>black_men_9<span class="sc">-</span>black_men_10<span class="sc">-</span>black_men_11<span class="sc">-</span></span>
<span id="cb18-8"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb18-8" aria-hidden="true" tabindex="-1"></a>          black_men_12<span class="sc">-</span>black_men_13<span class="sc">-</span>black_men_14<span class="sc">-</span>black_men_15<span class="sc">-</span>black_men_16<span class="sc">-</span></span>
<span id="cb18-9"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb18-9" aria-hidden="true" tabindex="-1"></a>          black_men_17<span class="sc">-</span>black_women_u1<span class="sc">-</span>black_women_1<span class="sc">-</span>black_women_2<span class="sc">-</span>black_women_3<span class="sc">-</span></span>
<span id="cb18-10"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb18-10" aria-hidden="true" tabindex="-1"></a>          black_women_4<span class="sc">-</span>black_women_5<span class="sc">-</span>black_women_6<span class="sc">-</span>black_women_7<span class="sc">-</span>black_women_8<span class="sc">-</span></span>
<span id="cb18-11"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb18-11" aria-hidden="true" tabindex="-1"></a>          black_women_9<span class="sc">-</span>black_women_10<span class="sc">-</span>black_women_11<span class="sc">-</span>black_women_12<span class="sc">-</span></span>
<span id="cb18-12"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb18-12" aria-hidden="true" tabindex="-1"></a>          black_women_13<span class="sc">-</span>black_women_14<span class="sc">-</span>black_women_15<span class="sc">-</span>black_women_16<span class="sc">-</span></span>
<span id="cb18-13"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb18-13" aria-hidden="true" tabindex="-1"></a>          black_women_17)</span></code></pre></div>
</div>
<div id="step-5-finalize-and-export-the-dataset" class="section level2" number="2.27">
<h2><span class="header-section-number">2.27</span> Step 5: Finalize and export the dataset</h2>
<p>Now that we have our two key variables defined, let’s clean up the dataset by removing the variables we no longer need, and only keeping the variables necessary to create the bias index. Below, we take the existing dataset assigned to <code>co_counties_race</code>, and select the “GEOID” and “County” variables (which serve as ID variables), “total_black_pop_over17” and “total_pop_over17” (which are used to compute the bias index), and “total_pop” (which is not necessary to create “bias_index”, but which could prove useful in exploring alternate ways of defining a bias index than the one implemented in the tutorial). The new dataset is assigned to an object named <code>co_counties_census_2010</code>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Clean data by select relevant variables for analysis, and assign selection to new object named &quot;co_counties_census_2010&quot;</span></span>
<span id="cb19-2"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb19-2" aria-hidden="true" tabindex="-1"></a>co_counties_census_2010<span class="ot">&lt;-</span></span>
<span id="cb19-3"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb19-3" aria-hidden="true" tabindex="-1"></a>  co_counties_race <span class="sc">%&gt;%</span> </span>
<span id="cb19-4"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(GEOID, County, total_pop, total_black_pop_over17, total_pop_over17)</span></code></pre></div>
<p>Let’s view the dataset’s contents:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of &quot;co_counties_census_2010&quot;</span></span>
<span id="cb20-2"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb20-2" aria-hidden="true" tabindex="-1"></a>co_counties_census_2010</span></code></pre></div>
<pre><code>## # A tibble: 64 × 5
##    GEOID County          total_pop total_black_pop_over17 total_pop_over17
##    &lt;chr&gt; &lt;chr&gt;               &lt;dbl&gt;                  &lt;dbl&gt;            &lt;dbl&gt;
##  1 08023 Costilla County      3524                     18             2788
##  2 08025 Crowley County       5823                    556             5034
##  3 08027 Custer County        4255                     37             3525
##  4 08029 Delta County        30952                    139            24101
##  5 08031 Denver County      600158                  45338           471392
##  6 08035 Douglas County     285465                   2447           198453
##  7 08033 Dolores County       2064                      4             1602
##  8 08049 Grand County        14843                     43            11825
##  9 08039 Elbert County       23086                    122            17232
## 10 08041 El Paso County     622263                  27280           459587
## # … with 54 more rows</code></pre>
<p>At this point, we now have the census data used in the tutorial. This data was exported from R Studio, and provided to workshop participants as a CSV file that was included in the workshop materials.</p>
<p>To export the data, use the <code>write_csv</code> function; below, the first argument is the name of the object which contains the dataset to be exported, and the second argument is the desired file name. The data is exported to the current working directory, and can subsequently be opened on your spreadsheet software of choice as a CSV file.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exports the data</span></span>
<span id="cb22-2"><a href="appendix-using-tidycensus-to-extract-relevant-census-data.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(co_counties_census_2010, <span class="st">&quot;co_counties_census_2010.csv&quot;</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="loading-data.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/aranganath24/intro_GIS/edit/master/03-appendix.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/aranganath24/intro_GIS/blob/master/03-appendix.Rmd",
"text": null
},
"download": ["bookdownproj.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
