<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>A Using tidycensus to extract relevant census data | Exploring the Geography of Systemic Racism with Spatial Data Science</title>
  <meta name="description" content="A Using tidycensus to extract relevant census data | Exploring the Geography of Systemic Racism with Spatial Data Science" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="A Using tidycensus to extract relevant census data | Exploring the Geography of Systemic Racism with Spatial Data Science" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="A Using tidycensus to extract relevant census data | Exploring the Geography of Systemic Racism with Spatial Data Science" />
  
  
  

<meta name="author" content="Aditya Ranganath" />


<meta name="date" content="2022-06-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="references.html"/>

<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The Geography of Systemic Racism</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#workshop-objectives"><i class="fa fa-check"></i><b>1.1</b> Workshop Objectives</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i><b>1.2</b> Data</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#install-r-and-r-studio"><i class="fa fa-check"></i><b>1.3</b> Install R and R Studio</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#the-r-studio-interface"><i class="fa fa-check"></i><b>1.4</b> The R Studio Interface</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#install-and-load-packages"><i class="fa fa-check"></i><b>1.5</b> Install and load packages</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#set-working-directory"><i class="fa fa-check"></i><b>1.6</b> Set working directory</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="loading-data.html"><a href="loading-data.html"><i class="fa fa-check"></i><b>2</b> Loading data</a></li>
<li class="chapter" data-level="3" data-path="cleaning-and-filtering-data.html"><a href="cleaning-and-filtering-data.html"><i class="fa fa-check"></i><b>3</b> Cleaning and filtering data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="cleaning-and-filtering-data.html"><a href="cleaning-and-filtering-data.html#create-a-year-field"><i class="fa fa-check"></i><b>3.1</b> Create a “Year” field</a></li>
<li class="chapter" data-level="3.2" data-path="cleaning-and-filtering-data.html"><a href="cleaning-and-filtering-data.html#filter-by-year"><i class="fa fa-check"></i><b>3.2</b> Filter by year</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="transforming-data.html"><a href="transforming-data.html"><i class="fa fa-check"></i><b>4</b> Transforming Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="transforming-data.html"><a href="transforming-data.html#tabulate-county-level-count-of-traffic-stops-by-race"><i class="fa fa-check"></i><b>4.1</b> Tabulate county-level count of traffic stops by race</a></li>
<li class="chapter" data-level="4.2" data-path="transforming-data.html"><a href="transforming-data.html#reshape-the-data"><i class="fa fa-check"></i><b>4.2</b> Reshape the data</a></li>
<li class="chapter" data-level="4.3" data-path="transforming-data.html"><a href="transforming-data.html#calculate-total-stops-for-each-county-in-co_county_summary_wide"><i class="fa fa-check"></i><b>4.3</b> Calculate total stops for each county in <code>co_county_summary_wide</code></a></li>
<li class="chapter" data-level="4.4" data-path="transforming-data.html"><a href="transforming-data.html#clean-co_county_summary_wide-and-assign-to-new-object"><i class="fa fa-check"></i><b>4.4</b> Clean <code>co_county_summary_wide</code> and assign to new object</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="defining-an-index-of-racial-bias-in-traffic-stops.html"><a href="defining-an-index-of-racial-bias-in-traffic-stops.html"><i class="fa fa-check"></i><b>5</b> Defining an index of racial bias in traffic stops</a>
<ul>
<li class="chapter" data-level="5.1" data-path="defining-an-index-of-racial-bias-in-traffic-stops.html"><a href="defining-an-index-of-racial-bias-in-traffic-stops.html#read-in-2010-census-data"><i class="fa fa-check"></i><b>5.1</b> Read in 2010 census data</a></li>
<li class="chapter" data-level="5.2" data-path="defining-an-index-of-racial-bias-in-traffic-stops.html"><a href="defining-an-index-of-racial-bias-in-traffic-stops.html#join-census-data-to-co_county_black_stops"><i class="fa fa-check"></i><b>5.2</b> Join census data to <code>co_county_black_stops</code></a></li>
<li class="chapter" data-level="5.3" data-path="defining-an-index-of-racial-bias-in-traffic-stops.html"><a href="defining-an-index-of-racial-bias-in-traffic-stops.html#define-the-variables-that-will-be-used-in-the-bias-index"><i class="fa fa-check"></i><b>5.3</b> Define the variables that will be used in the bias index</a></li>
<li class="chapter" data-level="5.4" data-path="defining-an-index-of-racial-bias-in-traffic-stops.html"><a href="defining-an-index-of-racial-bias-in-traffic-stops.html#calculate-the-bias-index"><i class="fa fa-check"></i><b>5.4</b> Calculate the bias index</a></li>
<li class="chapter" data-level="5.5" data-path="defining-an-index-of-racial-bias-in-traffic-stops.html"><a href="defining-an-index-of-racial-bias-in-traffic-stops.html#compute-summary-statistics-for-the-bias-index"><i class="fa fa-check"></i><b>5.5</b> Compute summary statistics for the bias index</a></li>
<li class="chapter" data-level="5.6" data-path="defining-an-index-of-racial-bias-in-traffic-stops.html"><a href="defining-an-index-of-racial-bias-in-traffic-stops.html#visualize-county-level-variation-in-the-bias-index-using-ggplot"><i class="fa fa-check"></i><b>5.6</b> Visualize county-level variation in the bias index using <code>ggplot</code></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="mapping-the-bias-index.html"><a href="mapping-the-bias-index.html"><i class="fa fa-check"></i><b>6</b> Mapping the bias index</a>
<ul>
<li class="chapter" data-level="6.1" data-path="mapping-the-bias-index.html"><a href="mapping-the-bias-index.html#read-in-and-view-the-shapefile-of-co-counties"><i class="fa fa-check"></i><b>6.1</b> Read in and view the shapefile of CO counties</a></li>
<li class="chapter" data-level="6.2" data-path="mapping-the-bias-index.html"><a href="mapping-the-bias-index.html#join-co_counties_census_trafficstops-to-the-shapefile-of-colorado-counties"><i class="fa fa-check"></i><b>6.2</b> Join <code>co_counties_census_trafficstops</code> to the shapefile of Colorado counties</a></li>
<li class="chapter" data-level="6.3" data-path="mapping-the-bias-index.html"><a href="mapping-the-bias-index.html#display-the-bias-index-on-a-map-of-colorado-counties"><i class="fa fa-check"></i><b>6.3</b> Display the bias index on a map of Colorado counties</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="mapping-the-bias-index.html"><a href="mapping-the-bias-index.html#make-a-rough-draft-of-a-map"><i class="fa fa-check"></i><b>6.3.1</b> Make a rough draft of a map</a></li>
<li class="chapter" data-level="6.3.2" data-path="mapping-the-bias-index.html"><a href="mapping-the-bias-index.html#make-a-map-with-custom-breaks"><i class="fa fa-check"></i><b>6.3.2</b> Make a map with custom breaks</a></li>
<li class="chapter" data-level="6.3.3" data-path="mapping-the-bias-index.html"><a href="mapping-the-bias-index.html#make-a-map-with-custom-colors"><i class="fa fa-check"></i><b>6.3.3</b> Make a map with custom colors</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="mapping-the-bias-index.html"><a href="mapping-the-bias-index.html#make-a-categorical-map"><i class="fa fa-check"></i><b>6.4</b> Make a categorical map</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="refining-and-formatting-maps.html"><a href="refining-and-formatting-maps.html"><i class="fa fa-check"></i><b>7</b> Refining and formatting maps</a>
<ul>
<li class="chapter" data-level="7.1" data-path="refining-and-formatting-maps.html"><a href="refining-and-formatting-maps.html#refine-the-map-of-the-continuous-bias_index-variable"><i class="fa fa-check"></i><b>7.1</b> Refine the map of the continuous “bias_index” variable</a></li>
<li class="chapter" data-level="7.2" data-path="refining-and-formatting-maps.html"><a href="refining-and-formatting-maps.html#refine-the-categorical-map"><i class="fa fa-check"></i><b>7.2</b> Refine the categorical map</a></li>
<li class="chapter" data-level="7.3" data-path="refining-and-formatting-maps.html"><a href="refining-and-formatting-maps.html#create-a-dynamic-map-of-the-bias-index"><i class="fa fa-check"></i><b>7.3</b> Create a dynamic map of the bias index</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="exporting-maps.html"><a href="exporting-maps.html"><i class="fa fa-check"></i><b>8</b> Exporting maps</a></li>
<li class="chapter" data-level="9" data-path="summary-scripts.html"><a href="summary-scripts.html"><i class="fa fa-check"></i><b>9</b> Summary scripts</a>
<ul>
<li class="chapter" data-level="9.1" data-path="summary-scripts.html"><a href="summary-scripts.html#summary-script-to-prepare-clean-and-process-data-for-mapping"><i class="fa fa-check"></i><b>9.1</b> Summary script to prepare, clean, and process data for mapping</a></li>
<li class="chapter" data-level="9.2" data-path="summary-scripts.html"><a href="summary-scripts.html#summary-script-for-map-of-continuous-bias_index-variable"><i class="fa fa-check"></i><b>9.2</b> Summary script for map of continuous “bias_index” variable</a></li>
<li class="chapter" data-level="9.3" data-path="summary-scripts.html"><a href="summary-scripts.html#summary-script-for-categorical-map"><i class="fa fa-check"></i><b>9.3</b> Summary script for categorical map</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="reflections-and-discussion-questions.html"><a href="reflections-and-discussion-questions.html"><i class="fa fa-check"></i><b>10</b> Reflections and Discussion Questions</a></li>
<li class="chapter" data-level="11" data-path="conclusion-and-further-reading.html"><a href="conclusion-and-further-reading.html"><i class="fa fa-check"></i><b>11</b> Conclusion and Further Reading</a></li>
<li class="chapter" data-level="12" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>12</b> References</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="using-tidycensus-to-extract-relevant-census-data.html"><a href="using-tidycensus-to-extract-relevant-census-data.html"><i class="fa fa-check"></i><b>A</b> Using <em>tidycensus</em> to extract relevant census data</a>
<ul>
<li class="chapter" data-level="A.1" data-path="using-tidycensus-to-extract-relevant-census-data.html"><a href="using-tidycensus-to-extract-relevant-census-data.html#define-your-variables"><i class="fa fa-check"></i><b>A.1</b> Define your variables</a></li>
<li class="chapter" data-level="A.2" data-path="using-tidycensus-to-extract-relevant-census-data.html"><a href="using-tidycensus-to-extract-relevant-census-data.html#extract-the-variables-using-tidycensus"><i class="fa fa-check"></i><b>A.2</b> Extract the variables using tidycensus</a></li>
<li class="chapter" data-level="A.3" data-path="using-tidycensus-to-extract-relevant-census-data.html"><a href="using-tidycensus-to-extract-relevant-census-data.html#clean-the-tidycensus-dataset"><i class="fa fa-check"></i><b>A.3</b> Clean the <em>tidycensus</em> dataset</a></li>
<li class="chapter" data-level="A.4" data-path="using-tidycensus-to-extract-relevant-census-data.html"><a href="using-tidycensus-to-extract-relevant-census-data.html#define-new-variables"><i class="fa fa-check"></i><b>A.4</b> Define new variables</a></li>
<li class="chapter" data-level="A.5" data-path="using-tidycensus-to-extract-relevant-census-data.html"><a href="using-tidycensus-to-extract-relevant-census-data.html#finalize-and-export-the-dataset"><i class="fa fa-check"></i><b>A.5</b> Finalize and export the dataset</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Exploring the Geography of Systemic Racism with Spatial Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="using-tidycensus-to-extract-relevant-census-data" class="section level1" number="13">
<h1><span class="header-section-number">A</span> Using <em>tidycensus</em> to extract relevant census data</h1>
<p>In Section 5.1, we read in a county-level demographic dataset (extracted from the 2010 decennial census), which we subsequently used to generate one of the components of our bias indicator. That dataset was provided to you at the start of the workshop, and we did not discuss the process by which the dataset was generated in the main lesson. However, if you are curious about how that data was generated, the script in this Appendix can be used as a guide to reproduce the demographic dataset introduced in Section 5.1.</p>
<p>To extract the census demographic data required to create the bias index, we must first load a few required packages. In particular, please load the <code>tidyverse</code> (which was used in the workshop tutorial) and the <code>tidycensus</code> package, which is an R package that allows users to pull Census Bureau data using the Census API (if <em>tidycensus</em> is not already installed, please install it using <code>install.packages("tidycensus")</code>.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Loads libraries required to extract census data</span></span>
<span id="cb114-2"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span>
<span id="cb114-3"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>Before extracting data with <code>tidycensus</code>, you must <a href="https://api.census.gov/data/key_signup.html">acquire a Census API key from the Census Bureau website</a>; once you apply for a key on the website, your key will be immediately emailed to the address you provide. Enter your census API key in R Studio with the following code, replacing the <INSERT HERE> with your key:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">census_api_key</span>(<span class="st">&quot;INSERT HERE&quot;</span>)</span></code></pre></div>
<p>In the workshop, we were working with 2010 police stops data, so it made sense to pull demographic data from the 2010 decennial census (which would have been collected in 2009).
The discussion below is therefore framed with respect to the 2010 decennial census; if you choose to use another census data product (such as the American Community Survey) to create the bias index, your code may look slightly different.</p>
<div id="define-your-variables" class="section level2" number="13.1">
<h2><span class="header-section-number">A.1</span> Define your variables</h2>
<p>First, we can generate a table that contains the various variables (and associated variable codes) for the 2010 decennial census by using the <strong><code>load_variables()</code></strong> function. The arguments to the function below <code>(2010, "sf1")</code> indicate that we want to extract variable names and codes for the 2010 decennial census. Below, we assign the table to an object named <code>decennial_2010_variables</code>:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable list for 2010 Decennial assigned to object named &quot;decennial_2010_variables&quot;</span></span>
<span id="cb116-2"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb116-2" aria-hidden="true" tabindex="-1"></a>decennial_2010_variables<span class="ot">&lt;-</span><span class="fu">load_variables</span>(<span class="dv">2010</span>, <span class="st">&quot;sf1&quot;</span>)</span></code></pre></div>
<p>At this point, we can easily view the 2010 decennial variables table by passing <code>decennial_2010_variables</code> as an argument to the <strong><code>View()</code></strong> function:</p>
<p>Based on the information in <code>decennial_2010_variables</code>, we can identify the variable codes for the variables we want to extract. Then, we will define a vector (see below), assigned to an object named <code>my_vars</code> that assigns the variable codes to descriptive names; these descriptive names will be used as column names in the dataset returned by the census API call, while the variable codes will be used by <em>tidycensus</em> to populate the respective fields with the desired data.</p>
<p>For the purpose of defining the “bias_index” variable, recall that we needed to define the county-level percentage of traffic stops involving a Black motorist, and the county-level percentage of the adult Black population (with respect to the county’s overall adult population). The first component of this index was derived using the Stanford Open Policing data. In order to calculate the second component of the bias index, we need two key variables at the county level: the total adult (which we define as 17+) population, and the total adult Black population. These two variables can be extracted from the decennial census. However, there is no separate category in the decennial census for these two measures, so we must derive them based on the data that is available.</p>
<p>Therefore, given the available data, calculating the total over-17 population will require us to extract data for the male under-5 population, the male 5 to 9 population, the male 10 to 14 population, and the male 15 to 17 population, and analogous measures for the female population. Subtracting these values from the total overall population (among all age groups) will yield a value for the total over-17 population.</p>
<p>To calculate the Black over-17 population, we will extract a variable that defines the total Black population, and a series of variables that indicate the Black population for different demographic (sex/age) combinations 17 years old and younger; subtracting the sum of the latter variables from the total Black population yields a value for the Black over-17 population.</p>
<p>The code below extracts all the variables needed to carry out these calculations:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define and name variables for census API call</span></span>
<span id="cb117-2"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-2" aria-hidden="true" tabindex="-1"></a>my_vars<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="at">total_pop=</span><span class="st">&quot;P001001&quot;</span>,</span>
<span id="cb117-3"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">totalpop_men_u5=</span><span class="st">&quot;P012003&quot;</span>,</span>
<span id="cb117-4"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">totalpop_men_5to9=</span><span class="st">&quot;P012004&quot;</span>,</span>
<span id="cb117-5"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">totalpop_men_10to14=</span><span class="st">&quot;P012005&quot;</span>,</span>
<span id="cb117-6"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">totalpop_men_15to17=</span><span class="st">&quot;P012006&quot;</span>,</span>
<span id="cb117-7"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">totalpop_women_u5=</span><span class="st">&quot;P012027&quot;</span>,</span>
<span id="cb117-8"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">totalpop_women_5to9=</span><span class="st">&quot;P012028&quot;</span>,</span>
<span id="cb117-9"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">totalpop_women_10to14=</span><span class="st">&quot;P012029&quot;</span>,</span>
<span id="cb117-10"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">totalpop_women_15to17=</span><span class="st">&quot;P012030&quot;</span>,</span>
<span id="cb117-11"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_totalpop=</span><span class="st">&quot;PCT012B001&quot;</span>,</span>
<span id="cb117-12"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_u1=</span><span class="st">&quot;PCT012B003&quot;</span>,</span>
<span id="cb117-13"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_1=</span><span class="st">&quot;PCT012B004&quot;</span>,</span>
<span id="cb117-14"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-14" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_2=</span><span class="st">&quot;PCT012B005&quot;</span>,</span>
<span id="cb117-15"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-15" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_3=</span><span class="st">&quot;PCT012B006&quot;</span>,</span>
<span id="cb117-16"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_4=</span><span class="st">&quot;PCT012B007&quot;</span>,</span>
<span id="cb117-17"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_5=</span><span class="st">&quot;PCT012B008&quot;</span>,</span>
<span id="cb117-18"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-18" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_6=</span><span class="st">&quot;PCT012B009&quot;</span>,</span>
<span id="cb117-19"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-19" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_7=</span><span class="st">&quot;PCT012B010&quot;</span>,</span>
<span id="cb117-20"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-20" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_8=</span><span class="st">&quot;PCT012B011&quot;</span>,</span>
<span id="cb117-21"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-21" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_9=</span><span class="st">&quot;PCT012B012&quot;</span>,</span>
<span id="cb117-22"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-22" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_10=</span><span class="st">&quot;PCT012B013&quot;</span>,</span>
<span id="cb117-23"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-23" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_11=</span><span class="st">&quot;PCT012B014&quot;</span>,</span>
<span id="cb117-24"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-24" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_12=</span><span class="st">&quot;PCT012B015&quot;</span>,</span>
<span id="cb117-25"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-25" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_13=</span><span class="st">&quot;PCT012B016&quot;</span>,</span>
<span id="cb117-26"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-26" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_14=</span><span class="st">&quot;PCT012B017&quot;</span>,</span>
<span id="cb117-27"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-27" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_15=</span><span class="st">&quot;PCT012B018&quot;</span>,</span>
<span id="cb117-28"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-28" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_16=</span><span class="st">&quot;PCT012B019&quot;</span>,</span>
<span id="cb117-29"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-29" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_men_17=</span><span class="st">&quot;PCT012B020&quot;</span>,</span>
<span id="cb117-30"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-30" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_u1=</span><span class="st">&quot;PCT012B107&quot;</span>,</span>
<span id="cb117-31"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-31" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_1=</span><span class="st">&quot;PCT012B108&quot;</span>,</span>
<span id="cb117-32"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-32" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_2=</span><span class="st">&quot;PCT012B109&quot;</span>,</span>
<span id="cb117-33"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-33" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_3=</span><span class="st">&quot;PCT012B110&quot;</span>,</span>
<span id="cb117-34"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-34" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_4=</span><span class="st">&quot;PCT012B111&quot;</span>,</span>
<span id="cb117-35"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-35" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_5=</span><span class="st">&quot;PCT012B112&quot;</span>,</span>
<span id="cb117-36"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-36" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_6=</span><span class="st">&quot;PCT012B113&quot;</span>,</span>
<span id="cb117-37"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-37" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_7=</span><span class="st">&quot;PCT012B114&quot;</span>,</span>
<span id="cb117-38"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-38" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_8=</span><span class="st">&quot;PCT012B115&quot;</span>,</span>
<span id="cb117-39"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-39" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_9=</span><span class="st">&quot;PCT012B116&quot;</span>,</span>
<span id="cb117-40"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-40" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_10=</span><span class="st">&quot;PCT012B117&quot;</span>,</span>
<span id="cb117-41"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-41" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_11=</span><span class="st">&quot;PCT012B118&quot;</span>,</span>
<span id="cb117-42"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-42" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_12=</span><span class="st">&quot;PCT012B119&quot;</span>,</span>
<span id="cb117-43"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-43" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_13=</span><span class="st">&quot;PCT012B120&quot;</span>,</span>
<span id="cb117-44"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-44" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_14=</span><span class="st">&quot;PCT012B121&quot;</span>,</span>
<span id="cb117-45"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-45" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_15=</span><span class="st">&quot;PCT012B122&quot;</span>,</span>
<span id="cb117-46"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-46" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_16=</span><span class="st">&quot;PCT012B123&quot;</span>,</span>
<span id="cb117-47"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb117-47" aria-hidden="true" tabindex="-1"></a>           <span class="at">black_women_17=</span><span class="st">&quot;PCT012B124&quot;</span>)</span></code></pre></div>
</div>
<div id="extract-the-variables-using-tidycensus" class="section level2" number="13.2">
<h2><span class="header-section-number">A.2</span> Extract the variables using tidycensus</h2>
<p>Now that we have a vector of the variables we want to extract (along with descriptive names for those variables), we will use the <strong><code>get_decennial()</code></strong> function from <em>tidycensus</em> to extract these variables from the 2010 decennial census. Several arguments are passed to the <strong><code>get_decennial()</code></strong> function below:</p>
<ul>
<li><code>geography="county"</code> specifies that we want the census data to be provided at the county level</li>
<li><code>variables=my_vars</code> specifies the variables we want to extract, and the names they are to be given in the dataset; this information is contained in the <code>my_vars</code> vector defined above</li>
<li><code>state=CO</code> specifies the state for which we want to extract the data; this argument, together with the <code>geography="county"</code> argument, means that <em>tidycensus</em> will extract the specified data in <code>my_vars</code> at the county level for the state of Colorado.</li>
<li><code>survey="sf1"</code> indicates which census dataset we would like to query; here <code>sf1</code> (short for Summary File 1), indicates we are referring to the decennial census (as opposed, for example, to the American Community Survey)</li>
<li><code>output=wide</code> indicates that we want the dataset with the extracted variables to be in “wide” format, wherein each variable is assigned to its own column.</li>
<li><code>year=2010</code> indicates that we are interested in data from 2010. Combined with <code>survey="sf1"</code>, this will extract the 2010 decennial census data.</li>
</ul>
<p>Finally, we’ll assign the extracted dataset to an object named <code>co_counties_race</code>:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Issue call to Census API</span></span>
<span id="cb118-2"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb118-2" aria-hidden="true" tabindex="-1"></a>co_counties_race<span class="ot">&lt;-</span></span>
<span id="cb118-3"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb118-3" aria-hidden="true" tabindex="-1"></a><span class="fu">get_decennial</span>(</span>
<span id="cb118-4"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb118-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">geography=</span><span class="st">&quot;county&quot;</span>, </span>
<span id="cb118-5"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb118-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables=</span>my_vars,</span>
<span id="cb118-6"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb118-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">state=</span><span class="st">&quot;CO&quot;</span>,</span>
<span id="cb118-7"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb118-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">survey=</span><span class="st">&quot;sf1&quot;</span>,</span>
<span id="cb118-8"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb118-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">output=</span><span class="st">&quot;wide&quot;</span>,</span>
<span id="cb118-9"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb118-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">year=</span><span class="dv">2010</span>)          </span></code></pre></div>
<pre><code>## Getting data from the 2010 decennial Census</code></pre>
<pre><code>## Using FIPS code &#39;08&#39; for state &#39;CO&#39;</code></pre>
<pre><code>## Using Census Summary File 1</code></pre>
<p>We can print the first few lines of the dataset to the console to view its structure, and ensure that everything looks in order:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of &quot;co_counties_race&quot;</span></span>
<span id="cb122-2"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb122-2" aria-hidden="true" tabindex="-1"></a>co_counties_race</span></code></pre></div>
<pre><code># A tibble: 64 × 48
   GEOID NAME       total_pop totalpop_men_u5 totalpop_men_5t… totalpop_men_10… totalpop_men_15… totalpop_women_…
   &lt;chr&gt; &lt;chr&gt;          &lt;dbl&gt;           &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
 1 08023 Costilla …      3524              99              102              107               95               76
 2 08025 Crowley C…      5823              88              110              136               81               94
 3 08027 Custer Co…      4255              62               95              113               85               74
 4 08029 Delta Cou…     30952             887              913             1042              680              865
 5 08031 Denver Co…    600158           22252            18894            15319             8920            21263
 6 08035 Douglas C…    285465           11278            13587            12664             6913            10622
 7 08033 Dolores C…      2064              58               63               71               40               78
 8 08049 Grand Cou…     14843             416              421              431              261              422
 9 08039 Elbert Co…     23086             594              790              976              611              563
10 08041 El Paso C…    622263           23152            23050            23252            14097            22060
# … with 54 more rows, and 40 more variables: totalpop_women_5to9 &lt;dbl&gt;, totalpop_women_10to14 &lt;dbl&gt;,
#   totalpop_women_15to17 &lt;dbl&gt;, black_totalpop &lt;dbl&gt;, black_men_u1 &lt;dbl&gt;, black_men_1 &lt;dbl&gt;, black_men_2 &lt;dbl&gt;,
#   black_men_3 &lt;dbl&gt;, black_men_4 &lt;dbl&gt;, black_men_5 &lt;dbl&gt;, black_men_6 &lt;dbl&gt;, black_men_7 &lt;dbl&gt;,
#   black_men_8 &lt;dbl&gt;, black_men_9 &lt;dbl&gt;, black_men_10 &lt;dbl&gt;, black_men_11 &lt;dbl&gt;, black_men_12 &lt;dbl&gt;,
#   black_men_13 &lt;dbl&gt;, black_men_14 &lt;dbl&gt;, black_men_15 &lt;dbl&gt;, black_men_16 &lt;dbl&gt;, black_men_17 &lt;dbl&gt;,
#   black_women_u1 &lt;dbl&gt;, black_women_1 &lt;dbl&gt;, black_women_2 &lt;dbl&gt;, black_women_3 &lt;dbl&gt;, black_women_4 &lt;dbl&gt;,
#   black_women_5 &lt;dbl&gt;, black_women_6 &lt;dbl&gt;, black_women_7 &lt;dbl&gt;, black_women_8 &lt;dbl&gt;, black_women_9 &lt;dbl&gt;, …</code></pre>
<p>As always, it is also possible to view the dataset in the R Studio data viewer by running <code>View(co_counties_race)</code>.</p>
</div>
<div id="clean-the-tidycensus-dataset" class="section level2" number="13.3">
<h2><span class="header-section-number">A.3</span> Clean the <em>tidycensus</em> dataset</h2>
<p>Having extracted the dataset, you may want to tidy it up, depending on your needs and preferences. For example, the “NAME” field includes the name of the state, which is not really necessary here since there are only observations from Colorado in the dataset. The code below creates a new variable named “County”, which is populated by removing the state name from the “NAME” field, and updates the <code>co_counties_race</code> object with this new variable:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove state name from NAME field</span></span>
<span id="cb124-2"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb124-2" aria-hidden="true" tabindex="-1"></a>co_counties_race<span class="ot">&lt;-</span>co_counties_race <span class="sc">%&gt;%</span> </span>
<span id="cb124-3"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb124-3" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">mutate</span>(<span class="at">County=</span><span class="fu">str_remove_all</span>(NAME, <span class="st">&quot;, Colorado&quot;</span>))   </span></code></pre></div>
<p>Note the newly created “County” variable is now in the dataset:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prints contents of &quot;co_counties_race&quot;</span></span>
<span id="cb125-2"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb125-2" aria-hidden="true" tabindex="-1"></a>co_counties_race</span></code></pre></div>
<pre><code># A tibble: 64 × 49
   GEOID County          NAME        total_pop totalpop_men_u5 totalpop_men_5t… totalpop_men_10… totalpop_men_15…
   &lt;chr&gt; &lt;chr&gt;           &lt;chr&gt;           &lt;dbl&gt;           &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
 1 08023 Costilla County Costilla C…      3524              99              102              107               95
 2 08025 Crowley County  Crowley Co…      5823              88              110              136               81
 3 08027 Custer County   Custer Cou…      4255              62               95              113               85
 4 08029 Delta County    Delta Coun…     30952             887              913             1042              680
 5 08031 Denver County   Denver Cou…    600158           22252            18894            15319             8920
 6 08035 Douglas County  Douglas Co…    285465           11278            13587            12664             6913
 7 08033 Dolores County  Dolores Co…      2064              58               63               71               40
 8 08049 Grand County    Grand Coun…     14843             416              421              431              261
 9 08039 Elbert County   Elbert Cou…     23086             594              790              976              611
10 08041 El Paso County  El Paso Co…    622263           23152            23050            23252            14097
# … with 54 more rows, and 41 more variables: totalpop_women_u5 &lt;dbl&gt;, totalpop_women_5to9 &lt;dbl&gt;,
#   totalpop_women_10to14 &lt;dbl&gt;, totalpop_women_15to17 &lt;dbl&gt;, black_totalpop &lt;dbl&gt;, black_men_u1 &lt;dbl&gt;,
#   black_men_1 &lt;dbl&gt;, black_men_2 &lt;dbl&gt;, black_men_3 &lt;dbl&gt;, black_men_4 &lt;dbl&gt;, black_men_5 &lt;dbl&gt;,
#   black_men_6 &lt;dbl&gt;, black_men_7 &lt;dbl&gt;, black_men_8 &lt;dbl&gt;, black_men_9 &lt;dbl&gt;, black_men_10 &lt;dbl&gt;,
#   black_men_11 &lt;dbl&gt;, black_men_12 &lt;dbl&gt;, black_men_13 &lt;dbl&gt;, black_men_14 &lt;dbl&gt;, black_men_15 &lt;dbl&gt;,
#   black_men_16 &lt;dbl&gt;, black_men_17 &lt;dbl&gt;, black_women_u1 &lt;dbl&gt;, black_women_1 &lt;dbl&gt;, black_women_2 &lt;dbl&gt;,
#   black_women_3 &lt;dbl&gt;, black_women_4 &lt;dbl&gt;, black_women_5 &lt;dbl&gt;, black_women_6 &lt;dbl&gt;, black_women_7 &lt;dbl&gt;, …</code></pre>
</div>
<div id="define-new-variables" class="section level2" number="13.4">
<h2><span class="header-section-number">A.4</span> Define new variables</h2>
<p>Now that we have a cleaned dataset with all our necessary variables, we can use these variables to generate the demographic variables needed to calculate the bias index. First, the code below defines a new variable, called “total_pop_over17”, that is calculated by subtracting the total population that is 17 and under from the total overall population:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create variable for total over-17 population</span></span>
<span id="cb127-2"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb127-2" aria-hidden="true" tabindex="-1"></a>co_counties_race<span class="ot">&lt;-</span></span>
<span id="cb127-3"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb127-3" aria-hidden="true" tabindex="-1"></a>  co_counties_race <span class="sc">%&gt;%</span> </span>
<span id="cb127-4"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb127-4" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">total_pop_over17=</span></span>
<span id="cb127-5"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb127-5" aria-hidden="true" tabindex="-1"></a>              total_pop<span class="sc">-</span>totalpop_men_u5<span class="sc">-</span>totalpop_men_5to9<span class="sc">-</span></span>
<span id="cb127-6"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb127-6" aria-hidden="true" tabindex="-1"></a>              totalpop_men_10to14<span class="sc">-</span>totalpop_men_15to17<span class="sc">-</span>totalpop_women_u5<span class="sc">-</span></span>
<span id="cb127-7"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb127-7" aria-hidden="true" tabindex="-1"></a>              totalpop_women_5to9<span class="sc">-</span>totalpop_women_10to14<span class="sc">-</span>totalpop_women_15to17)</span></code></pre></div>
<p>Then, we create a new variable named “total_black_pop_over17”, which is defined by subtracting the total Black population that is 17 and under from the total Black population:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create variable for total over-17 black population</span></span>
<span id="cb128-2"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb128-2" aria-hidden="true" tabindex="-1"></a>co_counties_race<span class="ot">&lt;-</span></span>
<span id="cb128-3"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb128-3" aria-hidden="true" tabindex="-1"></a>  co_counties_race <span class="sc">%&gt;%</span> </span>
<span id="cb128-4"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb128-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_black_pop_over17=</span></span>
<span id="cb128-5"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb128-5" aria-hidden="true" tabindex="-1"></a>          black_totalpop<span class="sc">-</span>black_men_u1<span class="sc">-</span>black_men_1<span class="sc">-</span></span>
<span id="cb128-6"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb128-6" aria-hidden="true" tabindex="-1"></a>          black_men_2<span class="sc">-</span>black_men_3<span class="sc">-</span>black_men_4<span class="sc">-</span>black_men_5<span class="sc">-</span>black_men_6<span class="sc">-</span></span>
<span id="cb128-7"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb128-7" aria-hidden="true" tabindex="-1"></a>          black_men_7<span class="sc">-</span>black_men_8<span class="sc">-</span>black_men_9<span class="sc">-</span>black_men_10<span class="sc">-</span>black_men_11<span class="sc">-</span></span>
<span id="cb128-8"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb128-8" aria-hidden="true" tabindex="-1"></a>          black_men_12<span class="sc">-</span>black_men_13<span class="sc">-</span>black_men_14<span class="sc">-</span>black_men_15<span class="sc">-</span>black_men_16<span class="sc">-</span></span>
<span id="cb128-9"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb128-9" aria-hidden="true" tabindex="-1"></a>          black_men_17<span class="sc">-</span>black_women_u1<span class="sc">-</span>black_women_1<span class="sc">-</span>black_women_2<span class="sc">-</span>black_women_3<span class="sc">-</span></span>
<span id="cb128-10"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb128-10" aria-hidden="true" tabindex="-1"></a>          black_women_4<span class="sc">-</span>black_women_5<span class="sc">-</span>black_women_6<span class="sc">-</span>black_women_7<span class="sc">-</span>black_women_8<span class="sc">-</span></span>
<span id="cb128-11"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb128-11" aria-hidden="true" tabindex="-1"></a>          black_women_9<span class="sc">-</span>black_women_10<span class="sc">-</span>black_women_11<span class="sc">-</span>black_women_12<span class="sc">-</span></span>
<span id="cb128-12"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb128-12" aria-hidden="true" tabindex="-1"></a>          black_women_13<span class="sc">-</span>black_women_14<span class="sc">-</span>black_women_15<span class="sc">-</span>black_women_16<span class="sc">-</span></span>
<span id="cb128-13"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb128-13" aria-hidden="true" tabindex="-1"></a>          black_women_17)</span></code></pre></div>
</div>
<div id="finalize-and-export-the-dataset" class="section level2" number="13.5">
<h2><span class="header-section-number">A.5</span> Finalize and export the dataset</h2>
<p>Now that we have our two key variables defined, let’s clean up the dataset by removing the variables we no longer need, only keeping the variables necessary to help create the bias index. Below, we take the existing dataset assigned to <code>co_counties_race</code>, and select the “GEOID” and “County” variables (which serve as ID variables), “total_black_pop_over17” and “total_pop_over17” (which are used to compute the bias index), and “total_pop” (which is not necessary to create “bias_index”, but which could prove useful in exploring alternate ways of defining a bias index than the one implemented in the tutorial). The new dataset is assigned to an object named <code>co_counties_census_2010</code>:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean data by select relevant variables for analysis, and assign </span></span>
<span id="cb129-2"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="co"># selection to new object named &quot;co_counties_census_2010&quot;</span></span>
<span id="cb129-3"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb129-3" aria-hidden="true" tabindex="-1"></a>co_counties_census_2010<span class="ot">&lt;-</span></span>
<span id="cb129-4"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb129-4" aria-hidden="true" tabindex="-1"></a>  co_counties_race <span class="sc">%&gt;%</span> </span>
<span id="cb129-5"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb129-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(GEOID, County, total_pop, total_black_pop_over17, total_pop_over17)</span></code></pre></div>
<p>Let’s now view the contents of <code>co_counties_census_2010</code>:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of &quot;co_counties_census_2010&quot;</span></span>
<span id="cb130-2"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb130-2" aria-hidden="true" tabindex="-1"></a>co_counties_census_2010</span></code></pre></div>
<pre><code># A tibble: 64 × 5
   GEOID County          total_pop total_black_pop_over17 total_pop_over17
   &lt;chr&gt; &lt;chr&gt;               &lt;dbl&gt;                  &lt;dbl&gt;            &lt;dbl&gt;
 1 08023 Costilla County      3524                     18             2788
 2 08025 Crowley County       5823                    556             5034
 3 08027 Custer County        4255                     37             3525
 4 08029 Delta County        30952                    139            24101
 5 08031 Denver County      600158                  45338           471392
 6 08035 Douglas County     285465                   2447           198453
 7 08033 Dolores County       2064                      4             1602
 8 08049 Grand County        14843                     43            11825
 9 08039 Elbert County       23086                    122            17232
10 08041 El Paso County     622263                  27280           459587
# … with 54 more rows</code></pre>
<p>At this point, we now have the census data that was provided to you at the start of the tutorial.</p>
<p>To export this dataset, use the <strong><code>write_csv()</code></strong> function; below, the first argument is the name of the object which contains the dataset to be exported, and the second argument is the desired file name. The data is exported to the current working directory, and can subsequently be opened on your spreadsheet software of choice as a CSV file.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exports the data assigned to the &quot;co_counties_census_2010&quot; object</span></span>
<span id="cb132-2"><a href="using-tidycensus-to-extract-relevant-census-data.html#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(co_counties_census_2010, <span class="st">&quot;co_counties_census_2010.csv&quot;</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="references.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/aranganath24/jmgl_sopp_workshop/edit/master/03-appendix.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/aranganath24/jmgl_sopp_workshop/blob/master/03-appendix.Rmd",
"text": null
},
"download": ["bookdownproj.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
