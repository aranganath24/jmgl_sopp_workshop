<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9 Summary scripts | Exploring the Geography of Systemic Racism with Spatial Data Science</title>
  <meta name="description" content="9 Summary scripts | Exploring the Geography of Systemic Racism with Spatial Data Science" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="9 Summary scripts | Exploring the Geography of Systemic Racism with Spatial Data Science" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9 Summary scripts | Exploring the Geography of Systemic Racism with Spatial Data Science" />
  
  
  

<meta name="author" content="Aditya Ranganath" />


<meta name="date" content="2022-06-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="exporting-maps.html"/>
<link rel="next" href="reflections-and-discussion-questions.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The Geography of Systemic Racism</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#workshop-objectives"><i class="fa fa-check"></i><b>1.1</b> Workshop Objectives</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i><b>1.2</b> Data</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#install-r-and-r-studio"><i class="fa fa-check"></i><b>1.3</b> Install R and R Studio</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#the-r-studio-interface"><i class="fa fa-check"></i><b>1.4</b> The R Studio Interface</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#install-and-load-packages"><i class="fa fa-check"></i><b>1.5</b> Install and load packages</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#set-working-directory"><i class="fa fa-check"></i><b>1.6</b> Set working directory</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="loading-data.html"><a href="loading-data.html"><i class="fa fa-check"></i><b>2</b> Loading data</a></li>
<li class="chapter" data-level="3" data-path="cleaning-and-filtering-data.html"><a href="cleaning-and-filtering-data.html"><i class="fa fa-check"></i><b>3</b> Cleaning and filtering data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="cleaning-and-filtering-data.html"><a href="cleaning-and-filtering-data.html#create-a-year-field"><i class="fa fa-check"></i><b>3.1</b> Create a “Year” field</a></li>
<li class="chapter" data-level="3.2" data-path="cleaning-and-filtering-data.html"><a href="cleaning-and-filtering-data.html#filter-by-year"><i class="fa fa-check"></i><b>3.2</b> Filter by year</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="transforming-data.html"><a href="transforming-data.html"><i class="fa fa-check"></i><b>4</b> Transforming Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="transforming-data.html"><a href="transforming-data.html#tabulate-county-level-count-of-traffic-stops-by-race"><i class="fa fa-check"></i><b>4.1</b> Tabulate county-level count of traffic stops by race</a></li>
<li class="chapter" data-level="4.2" data-path="transforming-data.html"><a href="transforming-data.html#reshape-the-data"><i class="fa fa-check"></i><b>4.2</b> Reshape the data</a></li>
<li class="chapter" data-level="4.3" data-path="transforming-data.html"><a href="transforming-data.html#calculate-total-stops-for-each-county-in-co_county_summary_wide"><i class="fa fa-check"></i><b>4.3</b> Calculate total stops for each county in <code>co_county_summary_wide</code></a></li>
<li class="chapter" data-level="4.4" data-path="transforming-data.html"><a href="transforming-data.html#clean-co_county_summary_wide-and-assign-to-new-object"><i class="fa fa-check"></i><b>4.4</b> Clean <code>co_county_summary_wide</code> and assign to new object</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="defining-an-index-of-racial-bias-in-traffic-stops.html"><a href="defining-an-index-of-racial-bias-in-traffic-stops.html"><i class="fa fa-check"></i><b>5</b> Defining an index of racial bias in traffic stops</a>
<ul>
<li class="chapter" data-level="5.1" data-path="defining-an-index-of-racial-bias-in-traffic-stops.html"><a href="defining-an-index-of-racial-bias-in-traffic-stops.html#read-in-2010-census-data"><i class="fa fa-check"></i><b>5.1</b> Read in 2010 census data</a></li>
<li class="chapter" data-level="5.2" data-path="defining-an-index-of-racial-bias-in-traffic-stops.html"><a href="defining-an-index-of-racial-bias-in-traffic-stops.html#join-census-data-to-co_county_black_stops"><i class="fa fa-check"></i><b>5.2</b> Join census data to <code>co_county_black_stops</code></a></li>
<li class="chapter" data-level="5.3" data-path="defining-an-index-of-racial-bias-in-traffic-stops.html"><a href="defining-an-index-of-racial-bias-in-traffic-stops.html#define-the-variables-that-will-be-used-in-the-bias-index"><i class="fa fa-check"></i><b>5.3</b> Define the variables that will be used in the bias index</a></li>
<li class="chapter" data-level="5.4" data-path="defining-an-index-of-racial-bias-in-traffic-stops.html"><a href="defining-an-index-of-racial-bias-in-traffic-stops.html#calculate-the-bias-index"><i class="fa fa-check"></i><b>5.4</b> Calculate the bias index</a></li>
<li class="chapter" data-level="5.5" data-path="defining-an-index-of-racial-bias-in-traffic-stops.html"><a href="defining-an-index-of-racial-bias-in-traffic-stops.html#compute-summary-statistics-for-the-bias-index"><i class="fa fa-check"></i><b>5.5</b> Compute summary statistics for the bias index</a></li>
<li class="chapter" data-level="5.6" data-path="defining-an-index-of-racial-bias-in-traffic-stops.html"><a href="defining-an-index-of-racial-bias-in-traffic-stops.html#visualize-county-level-variation-in-the-bias-index-using-ggplot"><i class="fa fa-check"></i><b>5.6</b> Visualize county-level variation in the bias index using <code>ggplot</code></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="mapping-the-bias-index.html"><a href="mapping-the-bias-index.html"><i class="fa fa-check"></i><b>6</b> Mapping the bias index</a>
<ul>
<li class="chapter" data-level="6.1" data-path="mapping-the-bias-index.html"><a href="mapping-the-bias-index.html#read-in-and-view-the-shapefile-of-co-counties"><i class="fa fa-check"></i><b>6.1</b> Read in and view the shapefile of CO counties</a></li>
<li class="chapter" data-level="6.2" data-path="mapping-the-bias-index.html"><a href="mapping-the-bias-index.html#join-co_counties_census_trafficstops-to-the-shapefile-of-colorado-counties"><i class="fa fa-check"></i><b>6.2</b> Join <code>co_counties_census_trafficstops</code> to the shapefile of Colorado counties</a></li>
<li class="chapter" data-level="6.3" data-path="mapping-the-bias-index.html"><a href="mapping-the-bias-index.html#display-the-bias-index-on-a-map-of-colorado-counties"><i class="fa fa-check"></i><b>6.3</b> Display the bias index on a map of Colorado counties</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="mapping-the-bias-index.html"><a href="mapping-the-bias-index.html#make-a-rough-draft-of-a-map"><i class="fa fa-check"></i><b>6.3.1</b> Make a rough draft of a map</a></li>
<li class="chapter" data-level="6.3.2" data-path="mapping-the-bias-index.html"><a href="mapping-the-bias-index.html#make-a-map-with-custom-breaks"><i class="fa fa-check"></i><b>6.3.2</b> Make a map with custom breaks</a></li>
<li class="chapter" data-level="6.3.3" data-path="mapping-the-bias-index.html"><a href="mapping-the-bias-index.html#make-a-map-with-custom-colors"><i class="fa fa-check"></i><b>6.3.3</b> Make a map with custom colors</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="mapping-the-bias-index.html"><a href="mapping-the-bias-index.html#make-a-categorical-map"><i class="fa fa-check"></i><b>6.4</b> Make a categorical map</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="refining-and-formatting-maps.html"><a href="refining-and-formatting-maps.html"><i class="fa fa-check"></i><b>7</b> Refining and formatting maps</a>
<ul>
<li class="chapter" data-level="7.1" data-path="refining-and-formatting-maps.html"><a href="refining-and-formatting-maps.html#refine-the-map-of-the-continuous-bias_index-variable"><i class="fa fa-check"></i><b>7.1</b> Refine the map of the continuous “bias_index” variable</a></li>
<li class="chapter" data-level="7.2" data-path="refining-and-formatting-maps.html"><a href="refining-and-formatting-maps.html#refine-the-categorical-map"><i class="fa fa-check"></i><b>7.2</b> Refine the categorical map</a></li>
<li class="chapter" data-level="7.3" data-path="refining-and-formatting-maps.html"><a href="refining-and-formatting-maps.html#create-a-dynamic-map-of-the-bias-index"><i class="fa fa-check"></i><b>7.3</b> Create a dynamic map of the bias index</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="exporting-maps.html"><a href="exporting-maps.html"><i class="fa fa-check"></i><b>8</b> Exporting maps</a></li>
<li class="chapter" data-level="9" data-path="summary-scripts.html"><a href="summary-scripts.html"><i class="fa fa-check"></i><b>9</b> Summary scripts</a>
<ul>
<li class="chapter" data-level="9.1" data-path="summary-scripts.html"><a href="summary-scripts.html#summary-script-to-prepare-clean-and-process-data-for-mapping"><i class="fa fa-check"></i><b>9.1</b> Summary script to prepare, clean, and process data for mapping</a></li>
<li class="chapter" data-level="9.2" data-path="summary-scripts.html"><a href="summary-scripts.html#summary-script-for-map-of-continuous-bias_index-variable"><i class="fa fa-check"></i><b>9.2</b> Summary script for map of continuous “bias_index” variable</a></li>
<li class="chapter" data-level="9.3" data-path="summary-scripts.html"><a href="summary-scripts.html#summary-script-for-categorical-map"><i class="fa fa-check"></i><b>9.3</b> Summary script for categorical map</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="reflections-and-discussion-questions.html"><a href="reflections-and-discussion-questions.html"><i class="fa fa-check"></i><b>10</b> Reflections and Discussion Questions</a></li>
<li class="chapter" data-level="11" data-path="conclusion-and-further-reading.html"><a href="conclusion-and-further-reading.html"><i class="fa fa-check"></i><b>11</b> Conclusion and Further Reading</a></li>
<li class="chapter" data-level="12" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>12</b> References</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="using-tidycensus-to-extract-relevant-census-data.html"><a href="using-tidycensus-to-extract-relevant-census-data.html"><i class="fa fa-check"></i><b>A</b> Using <em>tidycensus</em> to extract relevant census data</a>
<ul>
<li class="chapter" data-level="A.1" data-path="using-tidycensus-to-extract-relevant-census-data.html"><a href="using-tidycensus-to-extract-relevant-census-data.html#define-your-variables"><i class="fa fa-check"></i><b>A.1</b> Define your variables</a></li>
<li class="chapter" data-level="A.2" data-path="using-tidycensus-to-extract-relevant-census-data.html"><a href="using-tidycensus-to-extract-relevant-census-data.html#extract-the-variables-using-tidycensus"><i class="fa fa-check"></i><b>A.2</b> Extract the variables using tidycensus</a></li>
<li class="chapter" data-level="A.3" data-path="using-tidycensus-to-extract-relevant-census-data.html"><a href="using-tidycensus-to-extract-relevant-census-data.html#clean-the-tidycensus-dataset"><i class="fa fa-check"></i><b>A.3</b> Clean the <em>tidycensus</em> dataset</a></li>
<li class="chapter" data-level="A.4" data-path="using-tidycensus-to-extract-relevant-census-data.html"><a href="using-tidycensus-to-extract-relevant-census-data.html#define-new-variables"><i class="fa fa-check"></i><b>A.4</b> Define new variables</a></li>
<li class="chapter" data-level="A.5" data-path="using-tidycensus-to-extract-relevant-census-data.html"><a href="using-tidycensus-to-extract-relevant-census-data.html#finalize-and-export-the-dataset"><i class="fa fa-check"></i><b>A.5</b> Finalize and export the dataset</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Exploring the Geography of Systemic Racism with Spatial Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="summary-scripts" class="section level1" number="9">
<h1><span class="header-section-number">9</span> Summary scripts</h1>
<p>This section summarizes the code we have written over the course of the tutorial to map county-level variation in possible anti-Black bias in Colorado’s 2010 traffic patrol stops. Section 9.1 provides the script to clean and process the original dataset published by the Stanford Open Policing Project, and get that data into a form that is suitable for mapping. Section Section 9.2 provides the script to create a map of the continuous “bias_index” variable, with counties labeled. Section 9.3 provides the script to create a map of a categorical variable that indicates whether a county’s value for “bias_index” is greater than zero, or less than/equal to zero, and then make a map of this categorical variable (with counties labeled).</p>
<div id="summary-script-to-prepare-clean-and-process-data-for-mapping" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Summary script to prepare, clean, and process data for mapping</h2>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="summary-scripts.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in Stanford police data for Colorado and assign to object </span></span>
<span id="cb109-2"><a href="summary-scripts.html#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="co"># named &quot;co_traffic_stops&quot; </span></span>
<span id="cb109-3"><a href="summary-scripts.html#cb109-3" aria-hidden="true" tabindex="-1"></a>co_traffic_stops<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">&quot;co_statewide_2020_04_01.csv&quot;</span>)</span>
<span id="cb109-4"><a href="summary-scripts.html#cb109-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-5"><a href="summary-scripts.html#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create &quot;Year&quot; field based on existing &quot;date&quot; field</span></span>
<span id="cb109-6"><a href="summary-scripts.html#cb109-6" aria-hidden="true" tabindex="-1"></a>co_traffic_stops<span class="ot">&lt;-</span>co_traffic_stops <span class="sc">%&gt;%</span> </span>
<span id="cb109-7"><a href="summary-scripts.html#cb109-7" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">mutate</span>(<span class="at">Year=</span><span class="fu">substr</span>(co_traffic_stops<span class="sc">$</span>date, <span class="dv">1</span>,<span class="dv">4</span>))</span>
<span id="cb109-8"><a href="summary-scripts.html#cb109-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-9"><a href="summary-scripts.html#cb109-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter 2010 observations and assign to a new object named </span></span>
<span id="cb109-10"><a href="summary-scripts.html#cb109-10" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;co_traffic_stops_2010&quot;</span></span>
<span id="cb109-11"><a href="summary-scripts.html#cb109-11" aria-hidden="true" tabindex="-1"></a>co_traffic_stops_2010<span class="ot">&lt;-</span>co_traffic_stops <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Year<span class="sc">==</span><span class="dv">2010</span>)</span>
<span id="cb109-12"><a href="summary-scripts.html#cb109-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-13"><a href="summary-scripts.html#cb109-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute county-level count of traffic stops by race and assign to object </span></span>
<span id="cb109-14"><a href="summary-scripts.html#cb109-14" aria-hidden="true" tabindex="-1"></a><span class="co"># named &quot;co_county_summary&quot;</span></span>
<span id="cb109-15"><a href="summary-scripts.html#cb109-15" aria-hidden="true" tabindex="-1"></a>co_county_summary<span class="ot">&lt;-</span>co_traffic_stops_2010 <span class="sc">%&gt;%</span> </span>
<span id="cb109-16"><a href="summary-scripts.html#cb109-16" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">group_by</span>(county_name) <span class="sc">%&gt;%</span> </span>
<span id="cb109-17"><a href="summary-scripts.html#cb109-17" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">count</span>(subject_race) </span>
<span id="cb109-18"><a href="summary-scripts.html#cb109-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-19"><a href="summary-scripts.html#cb109-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshape the data so that the racial categories are transposed</span></span>
<span id="cb109-20"><a href="summary-scripts.html#cb109-20" aria-hidden="true" tabindex="-1"></a><span class="co"># from rows into columns and assign the result to an object named</span></span>
<span id="cb109-21"><a href="summary-scripts.html#cb109-21" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;co_county_summary_wide&quot;</span></span>
<span id="cb109-22"><a href="summary-scripts.html#cb109-22" aria-hidden="true" tabindex="-1"></a>co_county_summary_wide<span class="ot">&lt;-</span>co_county_summary <span class="sc">%&gt;%</span> </span>
<span id="cb109-23"><a href="summary-scripts.html#cb109-23" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">pivot_wider</span>(<span class="at">names_from=</span>subject_race, <span class="at">values_from=</span>n)</span>
<span id="cb109-24"><a href="summary-scripts.html#cb109-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-25"><a href="summary-scripts.html#cb109-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-26"><a href="summary-scripts.html#cb109-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates a new column named &quot;total_stops&quot; in &quot;co_county_summary_wide&quot; that</span></span>
<span id="cb109-27"><a href="summary-scripts.html#cb109-27" aria-hidden="true" tabindex="-1"></a><span class="co"># contains information on the total number of stops for each county </span></span>
<span id="cb109-28"><a href="summary-scripts.html#cb109-28" aria-hidden="true" tabindex="-1"></a><span class="co"># (across all racial categories)</span></span>
<span id="cb109-29"><a href="summary-scripts.html#cb109-29" aria-hidden="true" tabindex="-1"></a>co_county_summary_wide<span class="ot">&lt;-</span>co_county_summary_wide <span class="sc">%&gt;%</span> </span>
<span id="cb109-30"><a href="summary-scripts.html#cb109-30" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb109-31"><a href="summary-scripts.html#cb109-31" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">mutate</span>(<span class="at">total_stops=</span></span>
<span id="cb109-32"><a href="summary-scripts.html#cb109-32" aria-hidden="true" tabindex="-1"></a>                                 <span class="fu">sum</span>(<span class="fu">c_across</span>(<span class="fu">where</span>(is.integer)), <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb109-33"><a href="summary-scripts.html#cb109-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-34"><a href="summary-scripts.html#cb109-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Selects &quot;county_name&quot;, &quot;black&quot;, and &quot;total_stops&quot; variables from</span></span>
<span id="cb109-35"><a href="summary-scripts.html#cb109-35" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;co_county_summary_wide&quot;; then renames the &quot;black&quot; variable to </span></span>
<span id="cb109-36"><a href="summary-scripts.html#cb109-36" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;black_stops&quot; for clarity; then removes counties that are named &quot;NA&quot; </span></span>
<span id="cb109-37"><a href="summary-scripts.html#cb109-37" aria-hidden="true" tabindex="-1"></a><span class="co"># due to an error in the dataset</span></span>
<span id="cb109-38"><a href="summary-scripts.html#cb109-38" aria-hidden="true" tabindex="-1"></a>co_county_black_stops<span class="ot">&lt;-</span>co_county_summary_wide <span class="sc">%&gt;%</span></span>
<span id="cb109-39"><a href="summary-scripts.html#cb109-39" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">select</span>(county_name, black, total_stops) <span class="sc">%&gt;%</span> </span>
<span id="cb109-40"><a href="summary-scripts.html#cb109-40" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">rename</span>(<span class="at">black_stops=</span>black) <span class="sc">%&gt;%</span> </span>
<span id="cb109-41"><a href="summary-scripts.html#cb109-41" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">filter</span>(county_name<span class="sc">!=</span><span class="st">&quot;NA&quot;</span>)</span>
<span id="cb109-42"><a href="summary-scripts.html#cb109-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-43"><a href="summary-scripts.html#cb109-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in the pre-prepared demographic data from the 2010 decennial </span></span>
<span id="cb109-44"><a href="summary-scripts.html#cb109-44" aria-hidden="true" tabindex="-1"></a><span class="co"># census and assign to an object named &quot;co_counties_census_2010&quot;</span></span>
<span id="cb109-45"><a href="summary-scripts.html#cb109-45" aria-hidden="true" tabindex="-1"></a>co_counties_census_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">&quot;co_county_decennial_census.csv&quot;</span>)</span>
<span id="cb109-46"><a href="summary-scripts.html#cb109-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-47"><a href="summary-scripts.html#cb109-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Join &quot;co_counties_census_2010&quot; to &quot;co_county_black_stops&quot; and assign the result</span></span>
<span id="cb109-48"><a href="summary-scripts.html#cb109-48" aria-hidden="true" tabindex="-1"></a><span class="co"># to an object named &quot;co_counties_census_trafficstops&quot;</span></span>
<span id="cb109-49"><a href="summary-scripts.html#cb109-49" aria-hidden="true" tabindex="-1"></a>co_counties_census_trafficstops<span class="ot">&lt;-</span><span class="fu">full_join</span>(co_county_black_stops, </span>
<span id="cb109-50"><a href="summary-scripts.html#cb109-50" aria-hidden="true" tabindex="-1"></a>                                           co_counties_census_2010,</span>
<span id="cb109-51"><a href="summary-scripts.html#cb109-51" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;county_name&quot;</span><span class="ot">=</span><span class="st">&quot;County&quot;</span>))</span>
<span id="cb109-52"><a href="summary-scripts.html#cb109-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-53"><a href="summary-scripts.html#cb109-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the information in &quot;co_counties_census_trafficstops&quot; to define new </span></span>
<span id="cb109-54"><a href="summary-scripts.html#cb109-54" aria-hidden="true" tabindex="-1"></a><span class="co"># variables that will be used to compute the racial bias index: </span></span>
<span id="cb109-55"><a href="summary-scripts.html#cb109-55" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;black_stop_pct&quot; (the black percentage of overall traffic stops within</span></span>
<span id="cb109-56"><a href="summary-scripts.html#cb109-56" aria-hidden="true" tabindex="-1"></a><span class="co"># a county) and &quot;black_pop_pct&quot; (the black percentage of the county&#39;s </span></span>
<span id="cb109-57"><a href="summary-scripts.html#cb109-57" aria-hidden="true" tabindex="-1"></a><span class="co">#over-17 population)</span></span>
<span id="cb109-58"><a href="summary-scripts.html#cb109-58" aria-hidden="true" tabindex="-1"></a>co_counties_census_trafficstops<span class="ot">&lt;-</span></span>
<span id="cb109-59"><a href="summary-scripts.html#cb109-59" aria-hidden="true" tabindex="-1"></a>  co_counties_census_trafficstops <span class="sc">%&gt;%</span> </span>
<span id="cb109-60"><a href="summary-scripts.html#cb109-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">black_stop_pct=</span>((black_stops<span class="sc">/</span>total_stops)<span class="sc">*</span><span class="dv">100</span>),</span>
<span id="cb109-61"><a href="summary-scripts.html#cb109-61" aria-hidden="true" tabindex="-1"></a>          <span class="at">black_pop_pct=</span>((total_black_pop_over17<span class="sc">/</span>total_pop_over17)<span class="sc">*</span><span class="dv">100</span>))</span>
<span id="cb109-62"><a href="summary-scripts.html#cb109-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-63"><a href="summary-scripts.html#cb109-63" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the bias index and include it as a new variable in </span></span>
<span id="cb109-64"><a href="summary-scripts.html#cb109-64" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;co_counties_census_trafficstops&quot;</span></span>
<span id="cb109-65"><a href="summary-scripts.html#cb109-65" aria-hidden="true" tabindex="-1"></a>co_counties_census_trafficstops<span class="ot">&lt;-</span>co_counties_census_trafficstops <span class="sc">%&gt;%</span> </span>
<span id="cb109-66"><a href="summary-scripts.html#cb109-66" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">mutate</span>(<span class="at">excess_stops_index=</span></span>
<span id="cb109-67"><a href="summary-scripts.html#cb109-67" aria-hidden="true" tabindex="-1"></a>                                           black_stop_pct<span class="sc">-</span>black_pop_pct)</span>
<span id="cb109-68"><a href="summary-scripts.html#cb109-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-69"><a href="summary-scripts.html#cb109-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Reads in Colorado county shapefile and assigns the shapefile to a new object </span></span>
<span id="cb109-70"><a href="summary-scripts.html#cb109-70" aria-hidden="true" tabindex="-1"></a><span class="co"># named &quot;co_counties_shapefile&quot;</span></span>
<span id="cb109-71"><a href="summary-scripts.html#cb109-71" aria-hidden="true" tabindex="-1"></a>co_counties_shapefile<span class="ot">&lt;-</span><span class="fu">st_read</span>(<span class="st">&quot;tl_2019_08_county.shp&quot;</span>)</span>
<span id="cb109-72"><a href="summary-scripts.html#cb109-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-73"><a href="summary-scripts.html#cb109-73" aria-hidden="true" tabindex="-1"></a><span class="co"># Join &quot;co_counties_census_trafficstops&quot; to &quot;co_counties_shapefile&quot; using </span></span>
<span id="cb109-74"><a href="summary-scripts.html#cb109-74" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;GEOID&quot; as the join field; assign the result to a new object named #</span></span>
<span id="cb109-75"><a href="summary-scripts.html#cb109-75" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;county_shapefile_biasIndex&quot;</span></span>
<span id="cb109-76"><a href="summary-scripts.html#cb109-76" aria-hidden="true" tabindex="-1"></a>county_shapefile_biasIndex<span class="ot">&lt;-</span><span class="fu">full_join</span>(co_counties_shapefile, co_counties_census_trafficstops, <span class="at">by=</span><span class="st">&quot;GEOID&quot;</span>)</span></code></pre></div>
</div>
<div id="summary-script-for-map-of-continuous-bias_index-variable" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Summary script for map of continuous “bias_index” variable</h2>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="summary-scripts.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creates color vector</span></span>
<span id="cb110-2"><a href="summary-scripts.html#cb110-2" aria-hidden="true" tabindex="-1"></a>my_colors<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;white&quot;</span>, <span class="st">&quot;peachpuff&quot;</span>, <span class="st">&quot;red1&quot;</span>, <span class="st">&quot;red4&quot;</span>, <span class="st">&quot;navy&quot;</span>) <span class="co"># defines color palette</span></span>
<span id="cb110-3"><a href="summary-scripts.html#cb110-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-4"><a href="summary-scripts.html#cb110-4" aria-hidden="true" tabindex="-1"></a><span class="co"># make a map of the continuous &quot;bias_index&quot; variable</span></span>
<span id="cb110-5"><a href="summary-scripts.html#cb110-5" aria-hidden="true" tabindex="-1"></a>traffic_bias_map_continuous_labeled<span class="ot">&lt;-</span>  </span>
<span id="cb110-6"><a href="summary-scripts.html#cb110-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(county_shapefile_biasIndex)<span class="sc">+</span> <span class="co"># specifies name of object containing data to be mapped</span></span>
<span id="cb110-7"><a href="summary-scripts.html#cb110-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;bias_index&quot;</span>, <span class="co"># specifies variable to be mapped</span></span>
<span id="cb110-8"><a href="summary-scripts.html#cb110-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">palette=</span>my_colors, <span class="co"># specifies color palette to be used in map</span></span>
<span id="cb110-9"><a href="summary-scripts.html#cb110-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">title=</span><span class="st">&quot;(Black % of Traffic Stops) - (Black % of Population)&quot;</span>, <span class="co"># creates legend subtitle</span></span>
<span id="cb110-10"><a href="summary-scripts.html#cb110-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">textNA=</span><span class="st">&quot;No Data&quot;</span>, <span class="co"># specifies label for NA data values</span></span>
<span id="cb110-11"><a href="summary-scripts.html#cb110-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">n=</span><span class="dv">5</span>, <span class="co"># specifies number of data partitions</span></span>
<span id="cb110-12"><a href="summary-scripts.html#cb110-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">breaks=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>,<span class="sc">-</span><span class="dv">5</span>, <span class="fl">0.01</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>))<span class="sc">+</span> <span class="co"># specifies legend breaks</span></span>
<span id="cb110-13"><a href="summary-scripts.html#cb110-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">frame=</span><span class="cn">FALSE</span>, <span class="co"># removes bounding box</span></span>
<span id="cb110-14"><a href="summary-scripts.html#cb110-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.outside=</span><span class="cn">TRUE</span>, <span class="co"># places legend outside map domain</span></span>
<span id="cb110-15"><a href="summary-scripts.html#cb110-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.text.size=</span><span class="fl">0.68</span>, <span class="co"># sets size of non-title legend text</span></span>
<span id="cb110-16"><a href="summary-scripts.html#cb110-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.title.size=</span><span class="fl">0.75</span>,  <span class="co"># sets text size for legend subtitle</span></span>
<span id="cb110-17"><a href="summary-scripts.html#cb110-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">title=</span><span class="st">&quot;Traffic Stop Racial Bias Index&quot;</span>, <span class="co"># sets legend main title</span></span>
<span id="cb110-18"><a href="summary-scripts.html#cb110-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">title.size=</span><span class="fl">0.75</span>, <span class="co"># sets text size for legend main title</span></span>
<span id="cb110-19"><a href="summary-scripts.html#cb110-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">title.fontface =</span> <span class="dv">2</span>, <span class="co"># makes legend title text bold</span></span>
<span id="cb110-20"><a href="summary-scripts.html#cb110-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title=</span><span class="st">&quot;Racial Bias in Traffic Stops, by County (Colorado)&quot;</span>, <span class="co"># sets main title for map</span></span>
<span id="cb110-21"><a href="summary-scripts.html#cb110-21" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.position=</span><span class="fl">0.03</span>, <span class="co"># sets position of main title</span></span>
<span id="cb110-22"><a href="summary-scripts.html#cb110-22" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size=</span><span class="dv">1</span>, <span class="co"># sets text size for map&#39;s main title</span></span>
<span id="cb110-23"><a href="summary-scripts.html#cb110-23" aria-hidden="true" tabindex="-1"></a>            <span class="at">attr.outside=</span><span class="cn">TRUE</span>)<span class="sc">+</span> <span class="co"># places credits outside map domain</span></span>
<span id="cb110-24"><a href="summary-scripts.html#cb110-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">&quot;Map Author: NAME</span><span class="sc">\n</span><span class="st">Data Sources: 2010 Decennial Census via tidycensus,</span><span class="sc">\n</span><span class="st">Stanford Open Policing Project,</span><span class="sc">\n</span><span class="st">Colorado GeoLibrary &quot;</span>, <span class="co"># sets credits text</span></span>
<span id="cb110-25"><a href="summary-scripts.html#cb110-25" aria-hidden="true" tabindex="-1"></a>                    <span class="at">position=</span><span class="fu">c</span>(<span class="fl">0.02</span>,<span class="fl">0.01</span>), <span class="co"># sets credits position</span></span>
<span id="cb110-26"><a href="summary-scripts.html#cb110-26" aria-hidden="true" tabindex="-1"></a>                    <span class="at">size=</span><span class="fl">0.38</span>)<span class="sc">+</span> <span class="co"># sets credits size</span></span>
<span id="cb110-27"><a href="summary-scripts.html#cb110-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">&quot;NAME&quot;</span>, <span class="co"># specifies the name of the variable in spatial dataset containing desired polygon labels</span></span>
<span id="cb110-28"><a href="summary-scripts.html#cb110-28" aria-hidden="true" tabindex="-1"></a>          <span class="at">size=</span><span class="fl">0.30</span>, <span class="co"># sets size of labels</span></span>
<span id="cb110-29"><a href="summary-scripts.html#cb110-29" aria-hidden="true" tabindex="-1"></a>          <span class="at">fontface=</span><span class="dv">2</span>) <span class="co"># makes polygon labels bold</span></span></code></pre></div>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="summary-scripts.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prints map</span></span>
<span id="cb111-2"><a href="summary-scripts.html#cb111-2" aria-hidden="true" tabindex="-1"></a>traffic_bias_map_continuous_labeled</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-90-1.png" width="672" /></p>
</div>
<div id="summary-script-for-categorical-map" class="section level2" number="9.3">
<h2><span class="header-section-number">9.3</span> Summary script for categorical map</h2>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="summary-scripts.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Makes categorical variable based on continuous &quot;bias_index&quot; variable; </span></span>
<span id="cb112-2"><a href="summary-scripts.html#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="co"># this categorical variable is named &quot;apparent_bias&quot;, and is coded as </span></span>
<span id="cb112-3"><a href="summary-scripts.html#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;Apparent Bias&quot; if &quot;bias_index&quot;&gt;0 and coded as &quot;No Apparent Bias&quot; if &quot;bias_index&quot;&lt;=0</span></span>
<span id="cb112-4"><a href="summary-scripts.html#cb112-4" aria-hidden="true" tabindex="-1"></a>county_shapefile_biasIndex<span class="ot">&lt;-</span></span>
<span id="cb112-5"><a href="summary-scripts.html#cb112-5" aria-hidden="true" tabindex="-1"></a>  county_shapefile_biasIndex <span class="sc">%&gt;%</span> </span>
<span id="cb112-6"><a href="summary-scripts.html#cb112-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">apparent_bias=</span><span class="fu">ifelse</span>(bias_index<span class="sc">&gt;</span><span class="dv">0</span>, <span class="st">&quot;Apparent Bias&quot;</span>, </span>
<span id="cb112-7"><a href="summary-scripts.html#cb112-7" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">&quot;No Apparent Bias&quot;</span>))</span>
<span id="cb112-8"><a href="summary-scripts.html#cb112-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-9"><a href="summary-scripts.html#cb112-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Makes categorical map based on &quot;apparent_bias&quot; variable and assigns this </span></span>
<span id="cb112-10"><a href="summary-scripts.html#cb112-10" aria-hidden="true" tabindex="-1"></a><span class="co"># map to object named &quot;traffic_bias_map_categorical&quot;</span></span>
<span id="cb112-11"><a href="summary-scripts.html#cb112-11" aria-hidden="true" tabindex="-1"></a>traffic_bias_map_categorical<span class="ot">&lt;-</span></span>
<span id="cb112-12"><a href="summary-scripts.html#cb112-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(county_shapefile_biasIndex)<span class="sc">+</span> <span class="co"># specifies name of spatial object containing data to be mapped</span></span>
<span id="cb112-13"><a href="summary-scripts.html#cb112-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;apparent_bias&quot;</span>, <span class="co"># specifies name of variable to be mapped</span></span>
<span id="cb112-14"><a href="summary-scripts.html#cb112-14" aria-hidden="true" tabindex="-1"></a>                <span class="at">title=</span><span class="st">&quot;&quot;</span>, <span class="co"># eliminates legend title</span></span>
<span id="cb112-15"><a href="summary-scripts.html#cb112-15" aria-hidden="true" tabindex="-1"></a>                <span class="at">palette=</span><span class="fu">c</span>(<span class="st">&quot;orangered1&quot;</span>, <span class="st">&quot;white&quot;</span>), <span class="co"># sets color scheme for categories</span></span>
<span id="cb112-16"><a href="summary-scripts.html#cb112-16" aria-hidden="true" tabindex="-1"></a>                <span class="at">textNA=</span><span class="st">&quot;No Data&quot;</span>)<span class="sc">+</span> <span class="co"># specifies label for NA data values</span></span>
<span id="cb112-17"><a href="summary-scripts.html#cb112-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame=</span><span class="cn">FALSE</span>, <span class="co"># removes map bounding box</span></span>
<span id="cb112-18"><a href="summary-scripts.html#cb112-18" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.outside=</span><span class="cn">TRUE</span>, <span class="co"># places legend outside map domain</span></span>
<span id="cb112-19"><a href="summary-scripts.html#cb112-19" aria-hidden="true" tabindex="-1"></a>              <span class="at">main.title=</span><span class="st">&quot;Racial Bias in Traffic Stops, by County in Colorado</span><span class="sc">\n</span><span class="st">(Based on Whether % of Black Motorists Stopped by Police &gt; County&#39;s Adult Black Population %)&quot;</span>, <span class="co"># sets main title for map</span></span>
<span id="cb112-20"><a href="summary-scripts.html#cb112-20" aria-hidden="true" tabindex="-1"></a>              <span class="at">main.title.position=</span><span class="fl">0.03</span>, <span class="co"># sets position for map&#39;s main title</span></span>
<span id="cb112-21"><a href="summary-scripts.html#cb112-21" aria-hidden="true" tabindex="-1"></a>              <span class="at">main.title.size=</span><span class="fl">0.75</span>, <span class="co"># sets size for map&#39;s main title</span></span>
<span id="cb112-22"><a href="summary-scripts.html#cb112-22" aria-hidden="true" tabindex="-1"></a>              <span class="at">attr.outside=</span><span class="cn">TRUE</span>)<span class="sc">+</span> <span class="co"># sets map credits outside map&#39;s domain</span></span>
<span id="cb112-23"><a href="summary-scripts.html#cb112-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">&quot;Map Author: NAME</span><span class="sc">\n</span><span class="st">Data Sources: 2010 Decennial Census via tidycensus,</span><span class="sc">\n</span><span class="st">Stanford Open Policing Project,</span><span class="sc">\n</span><span class="st">Colorado GeoLibrary &quot;</span>,  <span class="co"># sets text for map credits</span></span>
<span id="cb112-24"><a href="summary-scripts.html#cb112-24" aria-hidden="true" tabindex="-1"></a>              <span class="at">position=</span><span class="fu">c</span>(<span class="fl">0.02</span>,<span class="fl">0.01</span>), <span class="co"># Specifies location of map credits</span></span>
<span id="cb112-25"><a href="summary-scripts.html#cb112-25" aria-hidden="true" tabindex="-1"></a>             <span class="at">size=</span><span class="fl">0.38</span>)<span class="sc">+</span> <span class="co"># specifies size of map credit text</span></span>
<span id="cb112-26"><a href="summary-scripts.html#cb112-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">&quot;NAME&quot;</span>, <span class="co"># specifies the name of the variable in spatial dataset containing desired polygon labels</span></span>
<span id="cb112-27"><a href="summary-scripts.html#cb112-27" aria-hidden="true" tabindex="-1"></a>          <span class="at">size=</span><span class="fl">0.30</span>, <span class="co"># sets size of labels</span></span>
<span id="cb112-28"><a href="summary-scripts.html#cb112-28" aria-hidden="true" tabindex="-1"></a>          <span class="at">fontface=</span><span class="dv">2</span>) <span class="co"># makes polygon labels bold</span></span></code></pre></div>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="summary-scripts.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints categorical map</span></span>
<span id="cb113-2"><a href="summary-scripts.html#cb113-2" aria-hidden="true" tabindex="-1"></a>traffic_bias_map_categorical</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-92-1.png" width="672" /></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="exporting-maps.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reflections-and-discussion-questions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/aranganath24/jmgl_sopp_workshop/edit/master/02-lesson.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/aranganath24/jmgl_sopp_workshop/blob/master/02-lesson.Rmd",
"text": null
},
"download": ["bookdownproj.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
